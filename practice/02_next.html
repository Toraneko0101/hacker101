
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="01_amplify.html">
      
      
        <link rel="next" href="03_ga.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Next.js(App Router)+Vercelを用いてWebアプリを作成する - Hacker101</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 12a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M6 13h8l-3.5 3.5 1.42 1.42L17.84 12l-5.92-5.92L10.5 7.5 14 11H6v2Z"/></svg>');}</style>


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7Ccoursera+new:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"coursera new"}</style>
      
    
    
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/prism.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nextjsapp-routervercelweb" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href=".." title="Hacker101" class="md-header__button md-logo" aria-label="Hacker101" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hacker101
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Next.js(App Router)+Vercelを用いてWebアプリを作成する
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Toraneko0101/hacker101" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Hacker101
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Hacker101" class="md-nav__button md-logo" aria-label="Hacker101" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Hacker101
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Toraneko0101/hacker101" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Hacker101
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/book_list.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24's積ん読/Webコンテンツリスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Aws tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Aws tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/aws_tutorial/01_introduction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(AWSCLI概要)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Linux tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/linux_tutorial/00_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/linux_tutorial/01_command.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(1:コマンド)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/linux_tutorial/02_tool.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(2:ツール)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Math tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Math tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/math_tutorial/00_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数学の学習記録(主に証明等)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_2" >
        
          
          <label class="md-nav__link" for="__nav_1_4_2" id="__nav_1_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gun
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            Gun
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/math_tutorial/gun/01_set.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(1:集合)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/math_tutorial/gun/02_mapping.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(2: 写像)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/math_tutorial/gun/03_group.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(3:群)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    React tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            React tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/000_hazimeni.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(0:初めに)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/001_component.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    00-Component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/01_fragments.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01-Fragment(<>について)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/02_jsx.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02-JSX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/03_pure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03-純関数とReact
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/04_tree.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04-コンポーネントとツリー構造
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/05_event.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05-イベント
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/06_zyoutai.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06-注意点(状態の保存と階層について)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/07_state_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07-Stateの基本
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/08_render.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08-コンポーネントが画面に表示されるまで
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/09_dom.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09-仮想DOMについて理解する
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/10_state_snap.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10-stateが更新されるタイミング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/11_state_update.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11-stateを1回のイベントで複数回更新
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/12_state_obj.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12-setState(object)の注意点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/13_state_array.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13-setState(array)の注意点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_16" >
        
          
          <label class="md-nav__link" for="__nav_1_5_16" id="__nav_1_5_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_16">
            <span class="md-nav__icon md-icon"></span>
            Hooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/01_useState.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useState
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/02_useEffect.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useEffect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/03_useContext.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useContext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/04_useReducer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useReducer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/05_useCallback.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useCallback + React.memo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/06_useMemo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useMemo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/07_useRef.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useRef
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/08_useId.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useId
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/09_useSyncExternalStore.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useSyncExternalStore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/10_useTransition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    useTransiton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/react_tutorial/hooks/hook.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hook全般
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sql tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Sql tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/00_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/01_introduction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(1:導入)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/02_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(2:基本)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/03_phrase.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(3:○○句)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/04_join.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(4:結合)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/05_set.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(5:集合)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/06_dataOpe.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(6:データ操作)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/07_group.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(7:集計)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/08_subquery.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(8:サブクエリ)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/09_outerjoin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(9:外部結合)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/10_case.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(10:条件)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/11_transaction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(11:複数反映)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/12_index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(12:インデックス)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/13_view.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(13:ビュー)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/14_meta.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(14:メタ&動的)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/15_window.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(15:解析関数)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/16_partition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (クイズ16:Partition)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/17_bigdata.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(17:BigData)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/sql_tutorial/18_design.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(18:DB設計)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Web tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Web tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_1" >
        
          
          <label class="md-nav__link" for="__nav_1_7_1" id="__nav_1_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    01 js lang
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            01 js lang
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/00_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/01_easy1_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(初級1: JS概要)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/02_easy2_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(初級2:基本構文)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/03_easy3_if.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(初級3:条件分岐)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/04_easy4_loop.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(初級4:ループ)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/05_easy5_func.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(初級5：関数)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/06_easy6_quality.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(初級6:コード品質)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/07_other.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 other
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/08_middle1_obj.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級1:Object)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/09_middle2_type.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級2:データ型)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/10_middle3_array.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級3:配列)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/11_middle4_iterator.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級4:イテレータ)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/12_middle5_mapset.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級5:map&set)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/13_middle6_destructuring.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級6:分割代入)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/14_middle7_date.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級7:日付)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/15_middle8_json.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級8:JSON)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/16_middle9_func2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級9:関数発展)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/17_middle10_property.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級10:プロパティ)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/18_hard1_prototype.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級1:prototype)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/19_hard2_class.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級2:クラス)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/20_hard3_error.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級3:Error)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/21_hard4_asynchronous.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級4:非同期)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/22_hard5_generator.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級5:generator)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/23_hard6_module.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級6:モジュール)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/24_hard7_proxy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級7:Proxy)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/25_hard8_other.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(上級8:その他)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/32_intermedia.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(中級)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/33_advanced.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(発展)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/35_dom2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(DOM2)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/01_js_lang/36_new.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(新機能)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_2" >
        
          
          <label class="md-nav__link" for="__nav_1_7_2" id="__nav_1_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    02 browser
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            02 browser
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/02_browser/26_browser1_dom.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(1:DOM概要)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/02_browser/27_browser2_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(2:基本)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/02_browser/28_browser3_document.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(3:DOMノード)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/web_tutorial/02_browser/29_browser4_event.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クイズ(4:イベント)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Practice
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Practice
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="00_frontend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    フロントエンド入門概要
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="01_amplify.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amplify + Reactアプリについて解説
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Next.js(App Router)+Vercelを用いてWebアプリを作成する
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="02_next.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Next.js(App Router)+Vercelを用いてWebアプリを作成する
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#q0" class="md-nav__link">
    <span class="md-ellipsis">
      Q0 以下のクイズを通して作っていくもの
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q0 以下のクイズを通して作っていくもの">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      作るもの
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      学べる機能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q1-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q1 Next.jsで新しいプロジェクトを作成する方法が分かりますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q1 Next.jsで新しいプロジェクトを作成する方法が分かりますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      新しいプロジェクトを作成する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      各ディレクトリ/ファイルの役割
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      階層図（一部省略済み）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#placeholder-data" class="md-nav__link">
    <span class="md-ellipsis">
      (補足)placeholder-dataについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ts" class="md-nav__link">
    <span class="md-ellipsis">
      (補足)tsについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      開発サーバを実行する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      補足(用語)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q2-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q2 Next.jsアプリに、スタイルを設定する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q2 Next.jsアプリに、スタイルを設定する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global" class="md-nav__link">
    <span class="md-ellipsis">
      Globalスタイル
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tailwind" class="md-nav__link">
    <span class="md-ellipsis">
      tailwind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      CSSモジュール
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clsx" class="md-nav__link">
    <span class="md-ellipsis">
      clsx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      利点と欠点（何を使うか）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q3-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q3 Next.jsアプリにフォントを追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q3 Next.jsアプリにフォントを追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      レイアウトシフトについて知っていますか?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      レイアウトシフトの悲劇
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clscumulative-layout-shift" class="md-nav__link">
    <span class="md-ellipsis">
      CLS(Cumulative Layout Shift)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextfont" class="md-nav__link">
    <span class="md-ellipsis">
      next/font
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      フォントを追加する
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q4-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q4 Next.jsアプリに画像(等の静的アセット)を追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q4 Next.jsアプリに画像(等の静的アセット)を追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      静的アセットの配置場所
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html" class="md-nav__link">
    <span class="md-ellipsis">
      通常のHTMLの場合
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextimage" class="md-nav__link">
    <span class="md-ellipsis">
      next/image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      画像を追加する
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q5-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q5 Next.jsでファイルシステムルーティングを使用する方法が分かりますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q5 Next.jsでファイルシステムルーティングを使用する方法が分かりますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      ファイルシステムルーティング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-router" class="md-nav__link">
    <span class="md-ellipsis">
      page routerとの差異
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      各ページを作成してみる
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q6-nextjsui" class="md-nav__link">
    <span class="md-ellipsis">
      Q6 Next.jsで複数のページにわたって共有されるUIを作成する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q6 Next.jsで複数のページにわたって共有されるUIを作成する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layouttsx" class="md-nav__link">
    <span class="md-ellipsis">
      layout.tsx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      ルートレイアウト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      ネストレイアウト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs-12page-router" class="md-nav__link">
    <span class="md-ellipsis">
      next.js 12以前(page router)から移行するときの注意点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboardlayout" class="md-nav__link">
    <span class="md-ellipsis">
      dashboard/layoutを作成してみる
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q7-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q7 Next.jsでページ間の移動を行う方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q7 Next.jsでページ間の移動を行う方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a" class="md-nav__link">
    <span class="md-ellipsis">
      なぜ&lt;a&gt;ではいけないのか
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link" class="md-nav__link">
    <span class="md-ellipsis">
      &lt;Link /&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      自動コード分割とプリフェッチについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q8-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q8 Next.jsでパスを比較する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q8 Next.jsでパスを比較する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usepathname" class="md-nav__link">
    <span class="md-ellipsis">
      usePathname()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windowlocationpathname" class="md-nav__link">
    <span class="md-ellipsis">
      window.location.pathnameではいけないのか
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q9-vercel" class="md-nav__link">
    <span class="md-ellipsis">
      Q9 Vercel(の使い方)でアプリをデプロイする方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q9 Vercel(の使い方)でアプリをデプロイする方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vercel" class="md-nav__link">
    <span class="md-ellipsis">
      vercel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vercel-free" class="md-nav__link">
    <span class="md-ellipsis">
      vercel free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      簡単な流れ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgres250mbfree" class="md-nav__link">
    <span class="md-ellipsis">
      postgresデータベースを作成する(250MBまでならfree)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbseed" class="md-nav__link">
    <span class="md-ellipsis">
      DBとseed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verceldb" class="md-nav__link">
    <span class="md-ellipsis">
      vercelでDBを検索してみる
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q10-nextjsdb" class="md-nav__link">
    <span class="md-ellipsis">
      Q10 Next.jsからDBのデータをフェッチする方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q10 Next.jsからDBのデータをフェッチする方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react-server-component" class="md-nav__link">
    <span class="md-ellipsis">
      React Server Component
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vercelpostgres" class="md-nav__link">
    <span class="md-ellipsis">
      @vercel/postgres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      補足
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      データを取得してみる
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストウォーターフォール
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      並列データフェッチ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q11" class="md-nav__link">
    <span class="md-ellipsis">
      Q11 静的レンダリングと動的レンダリングについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q11 静的レンダリングと動的レンダリングについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      静的レンダリング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      静的レンダリングの利点と使い道
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      動的レンダリング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      動的レンダリングの利点と使い道
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      レンダリングする際にどちらが使われるか
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unstable_nostore" class="md-nav__link">
    <span class="md-ellipsis">
      unstable_nostore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      上記(動的レンダリング)の問題点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q12" class="md-nav__link">
    <span class="md-ellipsis">
      Q12 ストリーミングについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q12 ストリーミングについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      ストリーミング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Next.jsでのストリーミングの実装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadingtsx" class="md-nav__link">
    <span class="md-ellipsis">
      loading.tsxについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadingtsx_1" class="md-nav__link">
    <span class="md-ellipsis">
      loading.tsxの例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      読み込み（ロード）スケルトンについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      ロードスケルトンの例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q13" class="md-nav__link">
    <span class="md-ellipsis">
      Q13 ルートグループについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q13 ルートグループについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q12_1" class="md-nav__link">
    <span class="md-ellipsis">
      Q12までの問題点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      ルートグループ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q14-suspense" class="md-nav__link">
    <span class="md-ellipsis">
      Q14 Suspenseについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q14 Suspenseについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react18suspense" class="md-nav__link">
    <span class="md-ellipsis">
      React18と&lt;Suspense /&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      新機能1(レンダリングのバッチ化)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      新機能2(トランジションの導入)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3suspense-ssr" class="md-nav__link">
    <span class="md-ellipsis">
      新機能3(&lt;Suspense /&gt;とSSR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjsreact-suspense" class="md-nav__link">
    <span class="md-ellipsis">
      Next.jsでReact Suspenseを利用する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component" class="md-nav__link">
    <span class="md-ellipsis">
      Componentのグループ化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suspense" class="md-nav__link">
    <span class="md-ellipsis">
      Suspense境界の選定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q15" class="md-nav__link">
    <span class="md-ellipsis">
      Q15 部分プリレンダリングについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q15 部分プリレンダリングについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      注意点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    <span class="md-ellipsis">
      静的コンテンツ or 動的コンテンツ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partial-prerendering" class="md-nav__link">
    <span class="md-ellipsis">
      Partial Prerendering(部分的なプリレンダリング)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ppr" class="md-nav__link">
    <span class="md-ellipsis">
      PPRの方法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q16-nextjsapi" class="md-nav__link">
    <span class="md-ellipsis">
      Q16 Next.jsのAPIを用いて検索機能を実装する方法について知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q16 Next.jsのAPIを用いて検索機能を実装する方法について知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      検索機能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      なぜURL検索パラメータを使うのか
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs_1" class="md-nav__link">
    <span class="md-ellipsis">
      検索機能実装に使えるNext.jsのフック
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      実装手順
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1 ユーザの入力をキャプチャ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-url" class="md-nav__link">
    <span class="md-ellipsis">
      2 検索パラメータを使用してURLを更新
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-url" class="md-nav__link">
    <span class="md-ellipsis">
      3 URLと入力の同期を維持する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ui" class="md-nav__link">
    <span class="md-ellipsis">
      4 検索クエリをUIに反映する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#params" class="md-nav__link">
    <span class="md-ellipsis">
      フックとparams
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q17" class="md-nav__link">
    <span class="md-ellipsis">
      Q17 ナビゲーションとキャッシュについて詳しく知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q17 ナビゲーションとキャッシュについて詳しく知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#link_1" class="md-nav__link">
    <span class="md-ellipsis">
      クライアント側のナビゲーションについて(LINK補足)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routerpush-vs-routerreplace" class="md-nav__link">
    <span class="md-ellipsis">
      router.push vs router.replace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4cache" class="md-nav__link">
    <span class="md-ellipsis">
      4つのcache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-memorizationreact" class="md-nav__link">
    <span class="md-ellipsis">
      Request Memorization(Reactの機能)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Data cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache" class="md-nav__link">
    <span class="md-ellipsis">
      個々のcacheの無効化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-route-cache" class="md-nav__link">
    <span class="md-ellipsis">
      full route cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsc-payload" class="md-nav__link">
    <span class="md-ellipsis">
      そもそもRSC Payloadとは
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      レンダリングの流れについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#router-cache" class="md-nav__link">
    <span class="md-ellipsis">
      router cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      注意点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      参考
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q18-debounce" class="md-nav__link">
    <span class="md-ellipsis">
      Q18 debounceについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q18 debounceについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debounce" class="md-nav__link">
    <span class="md-ellipsis">
      debounce
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q19" class="md-nav__link">
    <span class="md-ellipsis">
      Q19 ページネーションを追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q19 ページネーションを追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      方針
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      コード例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q20-react-server-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Q20 React Server Actionsについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q20 React Server Actionsについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react-server-actions" class="md-nav__link">
    <span class="md-ellipsis">
      React Server Actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      サーバアクションの魅力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      使い方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      使用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q21" class="md-nav__link">
    <span class="md-ellipsis">
      Q21 データや型を検証する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q21 データや型を検証する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      使いどころ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      基本的な使い方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      実用例(型を確かめてから挿入している)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q22" class="md-nav__link">
    <span class="md-ellipsis">
      Q22 動的ルートについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q22 動的ルートについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      使いどころ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      作成方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      注意点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q23-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q23 Next.jsにおけるエラーの処理について知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q23 Next.jsにおけるエラーの処理について知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trycatch" class="md-nav__link">
    <span class="md-ellipsis">
      try/catchについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirecttrycatch" class="md-nav__link">
    <span class="md-ellipsis">
      注意点(redirectとtry/catch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errortsx" class="md-nav__link">
    <span class="md-ellipsis">
      error.tsx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      本番と開発の違い
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-boundary" class="md-nav__link">
    <span class="md-ellipsis">
      Error boundaryについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errortsx_1" class="md-nav__link">
    <span class="md-ellipsis">
      error.tsxの使用例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notfound" class="md-nav__link">
    <span class="md-ellipsis">
      notFound関数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notfound_1" class="md-nav__link">
    <span class="md-ellipsis">
      notFound関数の使い方
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q24-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q24 Next.jsにおいてアクセシビリティを意識する場合の処理について知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q24 Next.jsにおいてアクセシビリティを意識する場合の処理について知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      アクセシビリティ概要
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs_2" class="md-nav__link">
    <span class="md-ellipsis">
      Next.jsによるアクセシビリティ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#form" class="md-nav__link">
    <span class="md-ellipsis">
      formにおけるアクセシビリティについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      フォームの検証
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useformstate" class="md-nav__link">
    <span class="md-ellipsis">
      useFormStateの使い方
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q25-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q25 Next.jsにおいて認証を追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q25 Next.jsにおいて認証を追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      認証と認可
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextauthjs" class="md-nav__link">
    <span class="md-ellipsis">
      NextAuth.jsについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextauth" class="md-nav__link">
    <span class="md-ellipsis">
      NextAuthの使い方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authconfigts" class="md-nav__link">
    <span class="md-ellipsis">
      auth.config.ts詳細
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#middlewarets" class="md-nav__link">
    <span class="md-ellipsis">
      middleware.ts詳細
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authts" class="md-nav__link">
    <span class="md-ellipsis">
      auth.ts詳細
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      ログインフォームと認証ロジックの接続
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    <span class="md-ellipsis">
      補足(認証の種類)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q26-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q26 Next.jsにメタデータを追加する方法を知っていますか?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="03_ga.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GoogleAnalyticsの導入について
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="04_chakra.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ChakraUI-tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="05_tailwind.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tailwind入門
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../others/introduction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自動生成
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../others/material.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Material
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#q0" class="md-nav__link">
    <span class="md-ellipsis">
      Q0 以下のクイズを通して作っていくもの
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q0 以下のクイズを通して作っていくもの">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      作るもの
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      学べる機能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q1-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q1 Next.jsで新しいプロジェクトを作成する方法が分かりますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q1 Next.jsで新しいプロジェクトを作成する方法が分かりますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      新しいプロジェクトを作成する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      各ディレクトリ/ファイルの役割
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      階層図（一部省略済み）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#placeholder-data" class="md-nav__link">
    <span class="md-ellipsis">
      (補足)placeholder-dataについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ts" class="md-nav__link">
    <span class="md-ellipsis">
      (補足)tsについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      開発サーバを実行する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      補足(用語)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q2-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q2 Next.jsアプリに、スタイルを設定する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q2 Next.jsアプリに、スタイルを設定する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global" class="md-nav__link">
    <span class="md-ellipsis">
      Globalスタイル
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tailwind" class="md-nav__link">
    <span class="md-ellipsis">
      tailwind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      CSSモジュール
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clsx" class="md-nav__link">
    <span class="md-ellipsis">
      clsx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      利点と欠点（何を使うか）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q3-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q3 Next.jsアプリにフォントを追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q3 Next.jsアプリにフォントを追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      レイアウトシフトについて知っていますか?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      レイアウトシフトの悲劇
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clscumulative-layout-shift" class="md-nav__link">
    <span class="md-ellipsis">
      CLS(Cumulative Layout Shift)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextfont" class="md-nav__link">
    <span class="md-ellipsis">
      next/font
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      フォントを追加する
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q4-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q4 Next.jsアプリに画像(等の静的アセット)を追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q4 Next.jsアプリに画像(等の静的アセット)を追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      静的アセットの配置場所
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html" class="md-nav__link">
    <span class="md-ellipsis">
      通常のHTMLの場合
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextimage" class="md-nav__link">
    <span class="md-ellipsis">
      next/image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      画像を追加する
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q5-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q5 Next.jsでファイルシステムルーティングを使用する方法が分かりますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q5 Next.jsでファイルシステムルーティングを使用する方法が分かりますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      ファイルシステムルーティング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-router" class="md-nav__link">
    <span class="md-ellipsis">
      page routerとの差異
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      各ページを作成してみる
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q6-nextjsui" class="md-nav__link">
    <span class="md-ellipsis">
      Q6 Next.jsで複数のページにわたって共有されるUIを作成する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q6 Next.jsで複数のページにわたって共有されるUIを作成する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layouttsx" class="md-nav__link">
    <span class="md-ellipsis">
      layout.tsx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      ルートレイアウト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      ネストレイアウト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs-12page-router" class="md-nav__link">
    <span class="md-ellipsis">
      next.js 12以前(page router)から移行するときの注意点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboardlayout" class="md-nav__link">
    <span class="md-ellipsis">
      dashboard/layoutを作成してみる
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q7-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q7 Next.jsでページ間の移動を行う方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q7 Next.jsでページ間の移動を行う方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a" class="md-nav__link">
    <span class="md-ellipsis">
      なぜ&lt;a&gt;ではいけないのか
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link" class="md-nav__link">
    <span class="md-ellipsis">
      &lt;Link /&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      自動コード分割とプリフェッチについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q8-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q8 Next.jsでパスを比較する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q8 Next.jsでパスを比較する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usepathname" class="md-nav__link">
    <span class="md-ellipsis">
      usePathname()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windowlocationpathname" class="md-nav__link">
    <span class="md-ellipsis">
      window.location.pathnameではいけないのか
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q9-vercel" class="md-nav__link">
    <span class="md-ellipsis">
      Q9 Vercel(の使い方)でアプリをデプロイする方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q9 Vercel(の使い方)でアプリをデプロイする方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vercel" class="md-nav__link">
    <span class="md-ellipsis">
      vercel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vercel-free" class="md-nav__link">
    <span class="md-ellipsis">
      vercel free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      簡単な流れ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgres250mbfree" class="md-nav__link">
    <span class="md-ellipsis">
      postgresデータベースを作成する(250MBまでならfree)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbseed" class="md-nav__link">
    <span class="md-ellipsis">
      DBとseed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verceldb" class="md-nav__link">
    <span class="md-ellipsis">
      vercelでDBを検索してみる
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q10-nextjsdb" class="md-nav__link">
    <span class="md-ellipsis">
      Q10 Next.jsからDBのデータをフェッチする方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q10 Next.jsからDBのデータをフェッチする方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react-server-component" class="md-nav__link">
    <span class="md-ellipsis">
      React Server Component
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vercelpostgres" class="md-nav__link">
    <span class="md-ellipsis">
      @vercel/postgres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      補足
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      データを取得してみる
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストウォーターフォール
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      並列データフェッチ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q11" class="md-nav__link">
    <span class="md-ellipsis">
      Q11 静的レンダリングと動的レンダリングについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q11 静的レンダリングと動的レンダリングについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      静的レンダリング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      静的レンダリングの利点と使い道
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      動的レンダリング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      動的レンダリングの利点と使い道
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      レンダリングする際にどちらが使われるか
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unstable_nostore" class="md-nav__link">
    <span class="md-ellipsis">
      unstable_nostore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      上記(動的レンダリング)の問題点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q12" class="md-nav__link">
    <span class="md-ellipsis">
      Q12 ストリーミングについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q12 ストリーミングについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      ストリーミング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Next.jsでのストリーミングの実装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadingtsx" class="md-nav__link">
    <span class="md-ellipsis">
      loading.tsxについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadingtsx_1" class="md-nav__link">
    <span class="md-ellipsis">
      loading.tsxの例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      読み込み（ロード）スケルトンについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      ロードスケルトンの例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q13" class="md-nav__link">
    <span class="md-ellipsis">
      Q13 ルートグループについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q13 ルートグループについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q12_1" class="md-nav__link">
    <span class="md-ellipsis">
      Q12までの問題点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      ルートグループ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q14-suspense" class="md-nav__link">
    <span class="md-ellipsis">
      Q14 Suspenseについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q14 Suspenseについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react18suspense" class="md-nav__link">
    <span class="md-ellipsis">
      React18と&lt;Suspense /&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      新機能1(レンダリングのバッチ化)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      新機能2(トランジションの導入)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3suspense-ssr" class="md-nav__link">
    <span class="md-ellipsis">
      新機能3(&lt;Suspense /&gt;とSSR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjsreact-suspense" class="md-nav__link">
    <span class="md-ellipsis">
      Next.jsでReact Suspenseを利用する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component" class="md-nav__link">
    <span class="md-ellipsis">
      Componentのグループ化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suspense" class="md-nav__link">
    <span class="md-ellipsis">
      Suspense境界の選定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q15" class="md-nav__link">
    <span class="md-ellipsis">
      Q15 部分プリレンダリングについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q15 部分プリレンダリングについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      注意点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    <span class="md-ellipsis">
      静的コンテンツ or 動的コンテンツ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partial-prerendering" class="md-nav__link">
    <span class="md-ellipsis">
      Partial Prerendering(部分的なプリレンダリング)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ppr" class="md-nav__link">
    <span class="md-ellipsis">
      PPRの方法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q16-nextjsapi" class="md-nav__link">
    <span class="md-ellipsis">
      Q16 Next.jsのAPIを用いて検索機能を実装する方法について知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q16 Next.jsのAPIを用いて検索機能を実装する方法について知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      検索機能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      なぜURL検索パラメータを使うのか
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs_1" class="md-nav__link">
    <span class="md-ellipsis">
      検索機能実装に使えるNext.jsのフック
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      実装手順
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1 ユーザの入力をキャプチャ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-url" class="md-nav__link">
    <span class="md-ellipsis">
      2 検索パラメータを使用してURLを更新
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-url" class="md-nav__link">
    <span class="md-ellipsis">
      3 URLと入力の同期を維持する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ui" class="md-nav__link">
    <span class="md-ellipsis">
      4 検索クエリをUIに反映する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#params" class="md-nav__link">
    <span class="md-ellipsis">
      フックとparams
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q17" class="md-nav__link">
    <span class="md-ellipsis">
      Q17 ナビゲーションとキャッシュについて詳しく知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q17 ナビゲーションとキャッシュについて詳しく知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#link_1" class="md-nav__link">
    <span class="md-ellipsis">
      クライアント側のナビゲーションについて(LINK補足)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routerpush-vs-routerreplace" class="md-nav__link">
    <span class="md-ellipsis">
      router.push vs router.replace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4cache" class="md-nav__link">
    <span class="md-ellipsis">
      4つのcache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-memorizationreact" class="md-nav__link">
    <span class="md-ellipsis">
      Request Memorization(Reactの機能)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Data cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache" class="md-nav__link">
    <span class="md-ellipsis">
      個々のcacheの無効化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-route-cache" class="md-nav__link">
    <span class="md-ellipsis">
      full route cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsc-payload" class="md-nav__link">
    <span class="md-ellipsis">
      そもそもRSC Payloadとは
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      レンダリングの流れについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#router-cache" class="md-nav__link">
    <span class="md-ellipsis">
      router cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      注意点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      参考
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q18-debounce" class="md-nav__link">
    <span class="md-ellipsis">
      Q18 debounceについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q18 debounceについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debounce" class="md-nav__link">
    <span class="md-ellipsis">
      debounce
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q19" class="md-nav__link">
    <span class="md-ellipsis">
      Q19 ページネーションを追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q19 ページネーションを追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      方針
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      コード例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q20-react-server-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Q20 React Server Actionsについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q20 React Server Actionsについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react-server-actions" class="md-nav__link">
    <span class="md-ellipsis">
      React Server Actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      サーバアクションの魅力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      使い方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      使用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q21" class="md-nav__link">
    <span class="md-ellipsis">
      Q21 データや型を検証する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q21 データや型を検証する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      使いどころ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      基本的な使い方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      実用例(型を確かめてから挿入している)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q22" class="md-nav__link">
    <span class="md-ellipsis">
      Q22 動的ルートについて知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q22 動的ルートについて知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      使いどころ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      作成方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      注意点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q23-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q23 Next.jsにおけるエラーの処理について知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q23 Next.jsにおけるエラーの処理について知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trycatch" class="md-nav__link">
    <span class="md-ellipsis">
      try/catchについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirecttrycatch" class="md-nav__link">
    <span class="md-ellipsis">
      注意点(redirectとtry/catch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errortsx" class="md-nav__link">
    <span class="md-ellipsis">
      error.tsx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      本番と開発の違い
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-boundary" class="md-nav__link">
    <span class="md-ellipsis">
      Error boundaryについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errortsx_1" class="md-nav__link">
    <span class="md-ellipsis">
      error.tsxの使用例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notfound" class="md-nav__link">
    <span class="md-ellipsis">
      notFound関数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notfound_1" class="md-nav__link">
    <span class="md-ellipsis">
      notFound関数の使い方
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q24-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q24 Next.jsにおいてアクセシビリティを意識する場合の処理について知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q24 Next.jsにおいてアクセシビリティを意識する場合の処理について知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      アクセシビリティ概要
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextjs_2" class="md-nav__link">
    <span class="md-ellipsis">
      Next.jsによるアクセシビリティ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#form" class="md-nav__link">
    <span class="md-ellipsis">
      formにおけるアクセシビリティについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      フォームの検証
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useformstate" class="md-nav__link">
    <span class="md-ellipsis">
      useFormStateの使い方
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q25-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q25 Next.jsにおいて認証を追加する方法を知っていますか?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Q25 Next.jsにおいて認証を追加する方法を知っていますか?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      認証と認可
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextauthjs" class="md-nav__link">
    <span class="md-ellipsis">
      NextAuth.jsについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nextauth" class="md-nav__link">
    <span class="md-ellipsis">
      NextAuthの使い方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authconfigts" class="md-nav__link">
    <span class="md-ellipsis">
      auth.config.ts詳細
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#middlewarets" class="md-nav__link">
    <span class="md-ellipsis">
      middleware.ts詳細
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authts" class="md-nav__link">
    <span class="md-ellipsis">
      auth.ts詳細
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      ログインフォームと認証ロジックの接続
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    <span class="md-ellipsis">
      補足(認証の種類)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#q26-nextjs" class="md-nav__link">
    <span class="md-ellipsis">
      Q26 Next.jsにメタデータを追加する方法を知っていますか?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="nextjsapp-routervercelweb">Next.js(App Router)+Vercelを用いてWebアプリを作成する</h1>
<h2 id="q0">Q0 以下のクイズを通して作っていくもの</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_1">作るもの</h3>
<pre class="highlight"><code class="language-text">財務ダッシュボード
  ・公開ホームページ
  ・ログインページ
  ・認証で保護されているダッシュボードのページ
  ・ユーザが請求書をInsert/Update/Deleteできる機能</code></pre>
<h3 id="_2">学べる機能</h3>
<pre class="highlight"><code class="language-text">スタイリング
  ・Next.jsを用いたアプリのスタイリング

最適化  
  ・画像、リンク、フォントなどを最適化する方法

ルーティング
  ・ファイルシステムルーティングを利用して、ネストされた
    レイアウトとページを作成する方法

データの取得
  ・Vercelでデータベースをセットアップ/取得する方法

検索とページネーション
  ・URL検索パラメータを使用し、検索とページネーションを
    実装する方法

データの変更
  ・React Server Actionsを使用してデータを変更し、
    Next.jsキャッシュを再検証する方法

エラー処理
  ・一般的なエラーと404errorを処理する方法

フォーム検証とアクセシビリティ
  ・サーバ側でフォームを検証する方法と
    アクセシビリティを向上させる方法

認証
  ・NextAuth.jsを使用して、アプリに認証を追加する方法

メタデータ
  ・メタデータを追加して、アプリをソーシャル共有用
    に準備する方法</code></pre>
<h3 id="_3">前提条件</h3>
<pre class="highlight"><code class="language-text">・Node.js 18.17.0以上
・OSはどれでもいい
・Githubアカウント
・Vercelアカウント</code></pre>
</details>
<h2 id="q1-nextjs">Q1 Next.jsで新しいプロジェクトを作成する方法が分かりますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_4">新しいプロジェクトを作成する</h3>
<pre class="highlight"><code class="language-bash">npx \
create-next-app@latest \
nextjs-dashboard --use-npm --example \
"https://github.com/vercel/next-learn/tree/main/dashboard/starter-example"</code></pre>
<pre class="highlight"><code class="language-text">npx(Node Package eXecution)
  ・node.jsパッケージの実行を一時的に行うためのもの

create-next-app@latest
  ・セットアップされた状態でNext.jsアプリの構築を開始
  ・依存関係はない

--use-npm
  ・アプリのパッケージマネージャとして
  　npmを利用する

--example
  ・Githubの公開URLやNext.jsの公式リポジトリを指定
  ・アプリを起動するための例
</code></pre>
<h3 id="_5">各ディレクトリ/ファイルの役割</h3>
<pre class="highlight"><code class="language-text">/app
  ・アプリケーションのルート
  ・コンポーネント、ロジックが含まれる

/app/lib
  ・再利用可能な関数や、データ取得用の関数など
  ・アプリで使用される関数が含まれる

/app/ui
  ・card, table, formなど、UIコンポーネント

/public
  ・画像を含む、静的アセット

/scripts
  ・scriptが含まれる

next.config.tsなど
  ・設定ファイル
  ・詳細は後記</code></pre>
<h3 id="_6">階層図（一部省略済み）</h3>
<pre class="highlight"><code class="language-text">.
├── README.md
├── next-env.d.ts
├── next.config.js
├── node_modules
├── package-lock.json
├── package.json
├── postcss.config.js
├── prettier.config.js
├── public
├── scripts
├── tailwind.config.ts
├── tsconfig.json
└── app
    ├── layout.tsx
    ├── lib
    │   ├── data.ts
    │   ├── definitions.ts
    │   ├── placeholder-data.js
    │   └── utils.ts
    ├── page.tsx
    └── ui
        ├── acme-logo.tsx
        ├── button.tsx
        ├── customers
        │   └── table.tsx
        ├── dashboard
        │   ├── cards.tsx
        │   ├── latest-invoices.tsx
        │   ├── nav-links.tsx
        │   ├── revenue-chart.tsx
        │   └── sidenav.tsx
        ├── global.css
        ├── invoices
        │   ├── breadcrumbs.tsx
        │   ├── buttons.tsx
        │   ├── create-form.tsx
        │   ├── edit-form.tsx
        │   ├── pagination.tsx
        │   ├── status.tsx
        │   └── table.tsx
        ├── login-form.tsx
        ├── search.tsx
        └── skeletons.tsx
</code></pre>
<h3 id="placeholder-data">(補足)placeholder-dataについて</h3>
<pre class="highlight"><code class="language-text">・APIやDBとの接続がまだ確立されていない状態で、
  本来DBにおけるテーブルのレコードの代わりとして使用
  されるデータを指す。

・今回の場合、JSON形式(またはJSオブジェクトとして使用)</code></pre>
<h3 id="ts">(補足)tsについて</h3>
<pre class="highlight"><code class="language-ts">//型定義の書き方は2種類ある

//1つ目

const author: {
  name : string;
  age: number;
  isFamous: boolean;
} = {
  name : "Neko",
  age: 125,
  isFamous: false
}

//2つ目
//型定義の部分を切り出す

const author: Author = {
  name : "Neko",
  age: 125,
  isFamous: false
}

interface Author {
  name : string;
  age: number;
  isFamous: boolean;
}

/*補足:型情報だけをexportする: 
  export interfaceともかける*/
export type AuthorType = Author;

/*直接型情報だけをexportすることも可能*/
export type Author {
  name: string;
  age: number;
  isFamous: boolean;
}</code></pre>
<h3 id="_7">開発サーバを実行する</h3>
<pre class="highlight"><code class="language-bash">#開発サーバのパッケージをinstall
npm i

#開発サーバを起動
npm run dev
</code></pre>
<h3 id="_8">補足(用語)</h3>
<pre class="highlight"><code class="language-text">・Next.jsでいう「ルート」とは /を意味するのではなく、
  各ページを意味する</code></pre>
</details>
<h2 id="q2-nextjs">Q2 Next.jsアプリに、スタイルを設定する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="global">Globalスタイル</h3>
<pre class="highlight"><code class="language-text">・現在、/app/uiにglobal.cssというファイルがある

・global.cssは、アプリ内のすべてのルートに
  スタイルを追加するためのファイル

・任意のcomponentにimportもできるが、通常は
  最上位のcomponentに追加する</code></pre>
<pre class="highlight"><code class="language-ts">/*
app/layout.tsx
*/

import "@/app/ui/global.css";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    &lt;html lang="en"&gt;
      &lt;body&gt;{children}&lt;/body&gt;
    &lt;/html&gt;
  );
}</code></pre>
<pre class="highlight"><code class="language-css">/*以降の章で解説*/
@tailwind base;
@tailwind components;
@tailwind utilities;

/*...*/</code></pre>
<h3 id="tailwind">tailwind</h3>
<pre class="highlight"><code class="language-text">tailwind
  ・CSSフレームワーク
  ・クラス名を追加して、要素をスタイル設定する

例
  &lt;h1 className="text-blue-500"&gt;I'm blue&lt;/h1&gt;

・各要素に直接スタイルを設定した場合、
  スタイルシートの衝突は起きない

・従来のCSSルールを記述したい or 
  スタイルをJSXから分離したい場合はCSSモジュールを使う

・※新しくプロジェクトを開始するタイミングで、
  Tailwindを使用するかどうかは選ぶことができる

@tailwind base;
  ・Tailwind CSSが提供するベーススタイルを挿入する

  ・ブラウザごとのスタイルの差異を打ち消してくれる

  ・ブラウザデフォルトのスタイルの多くをリセット
    してくれるためプロジェクトのスタイルを一貫した
    状態に保つことができる

@tailwind components;
  ・Tailwind CSSが提供するコンポーネントスタイルを挿入

  ・ボタン、カード、モーダルなどの複雑なUI要素を
    構築するために使う

  ・コンポーネントスタイルは
  　ベーススタイルの上に構築される

@tailwind utilities;
  ・Tailwind CSSが提供するユーティリティクラスを挿入

  ・デザインの各部分を細かく制御するためのクラス

  ・これにより、レイアウト、色、テキストスタイル、
    余白のバランスなどのスタイリングを簡単に実行可能</code></pre>
<h3 id="css">CSSモジュール</h3>
<pre class="highlight"><code class="language-text">CSSモジュール
  ・一意のクラス名を自動的に作成し、
    CSSをローカルにスコープする

  ・そのため異なるファイルで同じクラス名を使用しても
    衝突の心配がない</code></pre>
<pre class="highlight"><code class="language-css">/*
app/ui/home.module.css
*/

.shape {
  height: 0;
  width: 0;
  border-bottom: 30px solid black;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
}</code></pre>
<pre class="highlight"><code class="language-tsx">/*
app/page.tsx
*/
import styles from "@/app/ui/home.module.css";
&lt;div className={styles.shape} /&gt;;</code></pre>
<h3 id="clsx">clsx</h3>
<pre class="highlight"><code class="language-text">clsx
  ・クラス名を簡単に切り替えるためのライブラリ
  ・条件付きでクラスを適用するために使用する</code></pre>
<pre class="highlight"><code class="language-tsx">//簡単な例
import clsx from "clsx";
//import {clsx} from "clsx";

//string
clsx("foo", true &amp;&amp; "bar", "baz")
// -&gt; foo bar baz

//objectを渡す事も可能
//keyがclass名で、値が条件になる
clsx({
  foo: true,
  bar: false,
  baz: isTrue()
});
// -&gt; foo baz

clsx(
  {
    foo: true
  },
  {
    bar: false
  },
  null,
  {
    "-foobar": "hello"
  }
);
// -&gt; foo --foobar


</code></pre>
<pre class="highlight"><code class="language-tsx">//実用例
/*
app/ui/invoices/status.tsx
*/

import clsx from "clsx";

export default function InvoiceStatus({status: {status: string}}){
  return(
    &lt;span

      /*
        条件を作成するには条件演算子を利用するのがいい
        if, elseはjsx内では使えないので
        (&amp;&amp;, ||などの論理演算子ならいい)

        下記の場合、
        状態がpendingなら、背景色をgray、文字をgrayにし
        状態がpaidなら、背景色を緑, 文字をwhiteにする
      */
      className={clsx(
        "inline-flex items-center rounded-full px-2 py-1 text-sm",
        {
          "bg-gray-100 text-gray-500": status === "pending",
          "bg-green-500 text-white" : status === "paid",
        },
      )}
    &gt;
    // ...
  )
}</code></pre>
<h3 id="_9">利点と欠点（何を使うか）</h3>
<pre class="highlight"><code class="language-text">Global.css
  ・シンプルで簡単に導入可能
  ・グローバルスコープが衝突の可能性を引き起こす
  ・コンポーネントごとに
  　スタイルをカスタマイズするのが難しい

TailwindCSS + clsx
  ・簡単にカスタマイズできる
  ・クラス名を動的に生成可能
  ・クラス名のオーバーヘッドによりファイルサイズが増大
    する可能性がある
  ・クラス名が長くて読みにくい（折り返せばいいのでは？）

CSS Modules
  ・コンポーネントごとにスコープが分離され、スタイルの
    衝突を回避可能
  ・素のCSSを書く必要がある
  ・一つのコンポーネントに対して、一つのCSSファイルを作る
    ため、ファイル数が不要に増える</code></pre>
</details>
<h2 id="q3-nextjs">Q3 Next.jsアプリにフォントを追加する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_10">レイアウトシフトについて知っていますか?</h3>
<pre class="highlight"><code class="language-text">・プロジェクトでカスタムフォントを使用した場合を考える

1 ブラウザは最初に、システムフォントもしくは
  フォールバックフォント(対応する字体がない場合、
  他のフォントから借りてくる)でテキストをレンダリングする

2 読み込まれた後で、カスタムフォントが書かれている
  フォントファイルをfetchしてロードする

3 この入れ替えのタイミングで、テキストのサイズ、間隔、
  レイアウトが変更され、周囲の要素が移動することがある

  ⇒レイアウトシフト</code></pre>
<h3 id="_11">レイアウトシフトの悲劇</h3>
<pre class="highlight"><code class="language-text">・「決定」と「キャンセル」
  画面にはこの2つのボタンが表示されており、
  ユーザはキャンセルをクリックしたとする。

・しかし、この瞬間レイアウトシフトが起き、テキストの配置
  が移動。その結果ユーザは決定をクリックすることになった</code></pre>
<h3 id="clscumulative-layout-shift">CLS(Cumulative Layout Shift)</h3>
<pre class="highlight"><code class="language-text">CLS
  ・予期しないレイアウトシフトが発生する頻度を定量化する

レイアウトシフトの原因
  ・サイズが不明な画像/動画
  ・代替フォントよりも大きい/または小さいフォント
  ・動的にサイズ変更される第三者広告
  ・ウィジェット
  ・レンダリングにかかる時間がUI-componentごとに違う事
  ・開発環境では画像などが開発者のブラウザキャッシュに
    あるため、遅延がほとんど生じず問題に気付かないこと

悪くないレイアウトシフトもある
  ・ユーザの操作に応じて発生するレイアウトシフトは
    大丈夫。たとえばリンクのクリックをトリガとして、
    レイアウトが変化する場合は、ユーザが予期している

Skeleton Screen
  ・必要なリソースが読み込まれるまでの間、
    そのコンテンツの枠組みだけを表示する
  ・viewport(画面内)にあるコンポーネントが
    読み込まれた時にSkeletonを解除すれば
    レイアウトシフトは起こらないはず</code></pre>
<h3 id="nextfont">next/font</h3>
<pre class="highlight"><code class="language-text">・next.jsはnext/fontモジュールを使用すると、
  アプリ内のフォントを自動的に最適化する

・具体的にはビルド時にフォントファイルをDLし、
　静的アセットとしてホストする

・既にDL済みなのでユーザがアプリにアクセスしても
　フォントに関する追加のネットワーク要求は発生しない

・たとえばAmplifyでビルドして、S3+CloudFrontで配信
  しているケースを考える
・next/fontを使わない場合、fontは静的アセットと異なり
  フェッチ⇒後からロードという手順を踏むため、
  ロードのタイミングでフォントがデフォルトのものと
  入れ替わりレイアウトシフトが起きる

・next/fontを使うと、ビルド時にfontはすでに
  他の静的アセット同様S3に配置されているため、
  他の静的アセットと同じタイミングで読み込まれるため
  レンダリングシフトは起こらない</code></pre>
<h3 id="_12">フォントを追加する</h3>
<pre class="highlight"><code class="language-tsx">/*
app/ui/fonts.ts

・サブセットを指定することで、
　フォントファイルの一部のみを指定してDLできる

・下記の場合、ラテン文字セットのみを含む
　フォントファイルをDLしている

※複数の単語を含むフォントの場合は
  アンダースコアでつなぐ必要がある

※バリアブルフォントについて
  ・バリアブルフォントは1つのフォントファイル内で
    複数の太さを持つことができる

  ・バリアブルフォントでない場合は、下記の
    Lusitanaのようにweightを指定する必要がある

*/
import { Inter, Lusitana } from "next/font/google";

export const inter = Inter({ subsets: ["latin"] });

export const lusitana = Lusitana({
  weight: ["400", "700"],
  subsets: ["latin"],
})</code></pre>
<pre class="highlight"><code class="language-tsx">/*
app/layout.tsx

・bodyに対して適用することで、
　フォントをアプリ全体に適用させる

・適用時には、import名.classNameを用いる

・antialiasedはフォントを滑らかにするクラスである

※lusitanaの場合も、同様に使用箇所で指定している
*/
import "@/app/ui/global.css";
import { inter } from "@/app/ui/fonts";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    &lt;html lang="en"&gt;
      &lt;body className={`${inter.className} antialiased`}&gt;{children}&lt;/body&gt;
    &lt;/html&gt;
  );
}
</code></pre>
<pre class="highlight"><code class="language-text">・この状態でbodyを見るとfont-familyは以下のようだった

font-family: 
  '__Inter_aaf875', 
  '__Inter_Fallback_aaf875';

・*_Fallbackは代替フォントを指す</code></pre>
</details>
<h2 id="q4-nextjs">Q4 Next.jsアプリに画像(等の静的アセット)を追加する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_13">静的アセットの配置場所</h3>
<pre class="highlight"><code class="language-text">静的アセット
  ・画像等の静的アセットは、/publicフォルダの下に
    格納する
  ・publicフォルダ内のファイルはアプリ内で参照可能</code></pre>
<h3 id="html">通常のHTMLの場合</h3>
<pre class="highlight"><code class="language-html">&lt;img
  src="hoge.png"
  alt="My hogehoge image. The name hogehoge has no particular meaning.
/&gt;</code></pre>
<pre class="highlight"><code class="language-text">・画像が様々な画面サイズでうまく表示されることを
  確認する必要がある

・様々なデバイス用に画像サイズを指定する必要がある

・画像の読み込み時にレイアウトがずれるのを防ぐ必要がある

・ユーザのviewportの外にある画像は
  遅延読み込みするように設定する必要がある

⇒手動で設定するのはきつい</code></pre>
<h3 id="nextimage">next/image</h3>
<pre class="highlight"><code class="language-text">Imageコンポーネント
  ・HTMLの&lt;img&gt;タグの拡張

  ・画像読み込み時に自動的にレイアウトがずれるのを防ぐ

  ・小さなviewportを持つデバイスに大きな画像が送信
    されるのを防ぐべく、画像のサイズを変更する

  ・デフォルトで画像を遅延読み込みし、
    画像はviewportに入るときに読み込まれる
    （つまり、読み込み速度が高速化される）

  ・重要な画像の場合、priority={true}と設定することで、
  　遅延読み込みを無効化できる

  ※初期表示のviewport内にあるLCP(Largest Contentful
    Paint)つまり、最もサイズの大きな要素については、
    遅延読み込みではなく、事前読み込みの対象にした方が
    良いとされている

  ※preloadとは、別ページにいるときに裏で事前にDL
    してくれるNext.jsの機能で、これにより
    ユーザは初期表示時に待機する必要がなくなる

  ・placeholder="blur"などとすることで、
  　画像が読み込まれるまでの間、ユーザに
    画像が表示されるであろうことを予期させることも可能
    ※デフォルトはempty

  ・ブラウザがサポートしているなら、
    WebPやAVIFといった細心のフォーマットで画像を提供

  ・生成された各サイズの画像はブラウザのキャッシュに保存
    されるので次回以降はスムーズに読み込み可能


WebP
  ・画像とanimation画像の両方に最適
  ・より高い色深度（1ピクセルで表示できる色数）、
    アニメーションフレーム、透明度をサポート
  ・PNGやJPEGよりも圧縮率で優れている

AVIF
  ・WebPよりも優れた圧縮率を持つが、
    FireFoxにおいてアニメーション画像は
    サポートされていない</code></pre>
<h3 id="_14">画像を追加する</h3>
<pre class="highlight"><code class="language-tsx">/*
ユーザのデバイスに応じて画像を表示する

hidden : 基本は非表示
md:block 画面サイズがmd以上ならblock(表示)

block:基本は表示
md:hidden 画面サイズがmd以上ならhidden(非表示)

画像サイズ(width &amp; height)について
  ・重要なのは値ではなくアスペクト比（縦横比）
  ・ソース画像と同じアスペクト比にする
  ・identify &lt;file_name&gt;で調べたところ
  ・hero-desktop.pngは2000*1520
  ・hero-mobile.pngは560*620だった
  ・そのため、以下でもアスペクト比通りに設定している

  ・widthとheightはレイアウトシフトを避けるために
    使われるが、この値＝レンダリングサイズではない
    あくまでもこの2つのパラメータは
    正しいアスペクト比を推測するために用いられる

  ・ブラウザ側はアスペクト比の情報をもとに、
    自身の画面領域やデバイスの解像度、
    ユーザの設定（ブラウザのズームレベル）などから
  　予めレンダリングサイズを設定し、その領域の予約を行う
  　そうして、読み込み時のレイアウトシフトを防いでいる

*/

import Image from "next/image";

export default function Page(){
  return(
    //...
    &lt;Image
      src="/hero-desktop.png"
      width={1000}
      height={760}
      className="hidden md:block"
      alt="Screenshots of the dashboard project showing desktop version"
    /&gt;

    &lt;Image
      src="/hero-mobile.png"
      width={560}
      height={620}
      className="block md:hidden"
      alt="Screenshots of the dashboard project showing mobile version"
    /&gt;
  )
}</code></pre>
</details>
<h2 id="q5-nextjs">Q5 Next.jsでファイルシステムルーティングを使用する方法が分かりますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_15">ファイルシステムルーティング</h3>
<pre class="highlight"><code class="language-text">・Next.jsはディレクトリを使用してルートを定義する
  ファイルシステムベースのルーティングを採用している

・具体的には、page.tsx/page.jsx/page.js内で
  default exportしているコンポーネントを表示する

・対応例は以下の通りである

  app/page.tsxファイルに定義されたcomponent
  ⇒ /に表示

  app/dashboard/page.tsxファイルに定義されたcomponent
  ⇒ /dashboardに表示

・階層構造は以下のようである

.
├── app
     ├── page.tsx
     └── dashboard
          └── page.tsx</code></pre>
<h3 id="page-router">page routerとの差異</h3>
<pre class="highlight"><code class="language-text">・page routerの場合、ファイル名がHogehoge.tsxなどでも
  ページとして扱われていた

・app routerでは予約された名前のファイルのみが
  ルーティングの対象となる

・そのため、特定のページでしか使われないcomponentを
  ページの近くに配置できるようになった
  (componentsとpagesでディレクトリを分けていた時と比べ
  ファイル同士の関連性が分かりやすい)</code></pre>
<h3 id="_16">各ページを作成してみる</h3>
<pre class="highlight"><code class="language-tsx">// app配下に app/dashboard/page.tsxを作成する

export default function Page(){
  return &lt;p&gt;Dashboard Page&lt;/p&gt;;
}

// localhost:3000/dashboardで閲覧可能

//-----------------------------

// app/dashboard/customers/page.tsx

export default function Page(){
  return &lt;p&gt;Customer Page&lt;/p&gt;;
}

//--------------------------

// app/dashboard/invoices/page.tsx

export default function Page(){
  return &lt;p&gt;Invoices Page&lt;/p&gt;;
}</code></pre>
</details>
<h2 id="q6-nextjsui">Q6 Next.jsで複数のページにわたって共有されるUIを作成する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="layouttsx">layout.tsx</h3>
<pre class="highlight"><code class="language-text">layout.tsx
  ・複数のページ間でレイアウトおよび内部状態を共有可能
  ・主にヘッダーやフッターなどの共通部分を定義する
  ・ここにimportするコンポーネントもレイアウトの一部
  ・layout.tsxに書かれたコンポーネントは、
    ページが切り替わっても再レンダリングされないので
    不要なレンダリングを避けることができる
  ・page.tsxと同階層にある場合、layout.tsxはpage.tsxを
    ラップする。

・ページが切り替わった場合、page.tsxの部分だけが更新され
  layout.tsxに書かれた部分は再レンダリングされない
⇒部分レンダリング

・/app/hoge/layout.tsxがあったとき、
　この共通部分は/app/page.tsxには適用されない。
  同じフォルダ内の/app/hoge/fuga/page.tsxには適用される</code></pre>
<h3 id="_17">ルートレイアウト</h3>
<pre class="highlight"><code class="language-text">/app/layout.tsx
  ・app直下に書かれるlayout.tsxは
  　ルートレイアウトと呼ばれる

  ・必須

  ・ルートレイアウトに追加したUIはアプリ内の
    全てのページで共有される

  ・サーバから返される最初のHTMLを変更できるようにする
    ためhtmlタグとbodyタグを含む必要がある

  ・たとえばルートレイアウトにはメタデータを追加する</code></pre>
<h3 id="_18">ネストレイアウト</h3>
<pre class="highlight"><code class="language-text">・defaultでは、フォルダ階層内のレイアウトはネストされる

・そのため親レイアウトでchildrenを使うと、その部分に
  子レイアウトが描画される

[以下のフォルダ構成の場合]
/app
  layout.tsx
  page.tsx
  /dashboard
    layout.tsx
    page.tsx

/
⇒ /app/layout.tsx内の{children}に、
   /app/page.tsxが描画される

/dashboard
⇒ /app/layout.tsx内の{children}に
   /app/dashboard/layout.tsxが描画され
   /app/dashboard/layout.tsx内の{children}に
   /app/dashboard/page.tsxが描画される</code></pre>
<h3 id="nextjs-12page-router">next.js 12以前(page router)から移行するときの注意点</h3>
<pre class="highlight"><code class="language-text">・/app/layout.tsx、つまりルートレイアウトは
　_app.jsと_document.jsを置き換える

・layout.tsxも、page.tsxもデフォルトでは
  サーバコンポーネントとなる（設定で変更可能）</code></pre>
<h3 id="dashboardlayout"><code>dashboard/layout</code>を作成してみる</h3>
<pre class="highlight"><code class="language-tsx">//dashboard配下のページは
//常にこのlayoutを採用することになる
import SideNav from "../ui/dashboard/sidenav";

export default function Layout({ children }: { children: React.ReactNode }) {
  return (
    &lt;div className="flex h-screen flex-col md:flex-row md:overflow-hidden"&gt;
      &lt;div className="w-full flex-none md:w-64"&gt;
        &lt;SideNav /&gt;
      &lt;/div&gt;
      &lt;div className="flex-grow p-6 md:overflow-y-auto md:p-12"&gt;{children}&lt;/div&gt;
    &lt;/div&gt;</code></pre>
</details>
<h2 id="q7-nextjs">Q7 Next.jsでページ間の移動を行う方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="a">なぜ<code>&lt;a&gt;</code>ではいけないのか</h3>
<pre class="highlight"><code class="language-text">・&lt;a&gt;を使うとページ全体が更新される
・これは&lt;img&gt;が最適化されていなかったのと似ている

⇒全体を更新しているので時間がかかる
⇒また、遷移にも時間がかかる（プリフェッチしていないので）</code></pre>
<h3 id="link"><code>&lt;Link /&gt;</code></h3>
<pre class="highlight"><code class="language-text">・next/linkからimportする
・hrefにリンクを渡す

⇒ページ遷移がクライアントサイドで行われる
⇒リロードは発生しない</code></pre>
<h3 id="_19">自動コード分割とプリフェッチについて</h3>
<pre class="highlight"><code class="language-text">自動コード分割
  ・Next.jsはアプリをルートごとに自動的にコード分割する

  ・そのため特定のページでエラーが発生しても、
    残りのページは問題なく動作する

  ・また自動でコードを分割するという特徴は
    プリフェッチに役立っている

プリフェッチ
  ・React SPAは初期ロード時に、すべてのアプリコードを
    ロードしていたため初期ロード時に時間がかかったが、
    Next.jsの手法はそれと異なる。

  ・Next.jsは運用環境において（開発環境ではダメ）、
    ブラウザのviewportに&lt;Link/&gt;が表示されるたびに
    リンク先のルートのコードをバックグラウンドで
    自動的にプリフェッチする

  ・プリフェッチとは、データをあらかじめ読み込んでおく
    事を意味する

  ・そのため、実際にリンクをクリックしたときは、
    既にコードがバックグラウンドで読み込まれているため
    ほぼ瞬時に遷移できる

  ⇒初期ロード時にすべてを読み込むわけではないので、
    初回アクセス時に負担がかからない

</code></pre>
<h3 id="_20">例</h3>
<pre class="highlight"><code class="language-tsx"></code></pre>
</details>
<h2 id="q8-nextjs">Q8 Next.jsでパスを比較する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="usepathname">usePathname()</h3>
<pre class="highlight"><code class="language-text">・ユーザに対して、
  現在どのページにいるのかという情報を提供したい場合、
  URLから現在のパスを取得する必要がある

usePathname()
  ・このフックを使うと、パスをチェック可能
  ・これはフックなので、クライアントコンポーネントで
    使う必要がある

"use client"
  ・ファイルの先頭にこれを追加すると、
  　クライアントコンポーネントになる
  ⇒デフォルトではサーバコンポーネントなので</code></pre>
<h3 id="_21">例</h3>
<pre class="highlight"><code class="language-tsx">/*
app/ui/dashboard/nav-links.tsx
*/

"use client";

import {
  UserGroupIcon,
  HomeIcon,
  InboxIcon,
} from "@heroicons/react/24/outline";
import Link from "next/link";
import {usePathname} from "next/navigation";
import clsx from "clsx";

// ...

// link.href === pathnameの場合、
// つまりリンク先が現在のページの場合
// リンクを青くしている
// linkはurlやlink名が格納されたdictを想定
export default function NavLinks() {
  const pathname = usePathname();
  // ...
  return(
    &lt;Link
      key={link.name}
      href={link.href}
      className={clsx(
        "flex h-[48px] grow items-center justify-center gap-2 rounded-md bg-gray-50 p-3 text-sm font-medium hover:bg-sky-100 hover:text-blue-600 md:flex-none md:justify-start md:p-2 md:px-3",
        {
          "bg-sky-100 text-blue-600" : pathname === link.href,
        }
      )}
    &gt;
    &lt;/Link&gt;
  );
  // ...
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<h3 id="windowlocationpathname">window.location.pathnameではいけないのか</h3>
<pre class="highlight"><code class="language-text">A.　いけない

・クライアントコンポーネントもサーバ上で
  事前レンダリングされる

・そのためwindowオブジェクトを使っていると、
  その際に、window is not definedが発生する
  よって、windowオブジェクトはuseEffect内で
  書く必要がある。

・上記のようにuseEffect外で、pathを使いたいなら
  usePathname()を使うべき</code></pre>
</div>
</details>
<h2 id="q9-vercel">Q9 Vercel(の使い方)でアプリをデプロイする方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="vercel">vercel</h3>
<pre class="highlight"><code class="language-text">・Next.jsの作者が開発しているので、Next.jsの
  最適化に適している　</code></pre>
<h3 id="vercel-free">vercel free</h3>
<pre class="highlight"><code class="language-text">・商用利用しない
・お試しで利用したい

そんな場合は、hobbyプラン(free)を使える</code></pre>
<h3 id="_22">簡単な流れ</h3>
<pre class="highlight"><code class="language-text">・Vercelのアカウントを作成
・Githubにリポジトリを作成
・特定のリポジトリをimport
・プロジェクトに名前を付けてdeploy

⇒以降、main(master)ブランチにpushすると
  自動的に再デプロイされる

⇒main(master)ブランチに対するpull-requestを開いた場合
  previewを行うこともできる！</code></pre>
<h3 id="postgres250mbfree">postgresデータベースを作成する(250MBまでならfree)</h3>
<pre class="highlight"><code class="language-text">・自身のアプリを開く
・ストレージタブを選択
・Create new -&gt; Postgres -&gt; Continue
・DBのリージョンを設定する
　(※全ての新しいprojectのデフォルトのリージョンはiad1
　なので、これに合わせると応答時間が減少する)
・Connect
・.env.localから接続情報を取得
・script/に.envを作成し、取得した接続情報を記載
・.envが.gitignoreに追加されていることを確認
・npm i @vercel/postgresを実行し、Vercel Postgres SDK
  をinstallする</code></pre>
<h3 id="dbseed">DBとseed</h3>
<pre class="highlight"><code class="language-text">・package.jsonのscriptsセクションにseedという項目を作る
  "seed": "node -r dotenv/config ./scripts/seed.js"

・npm run seedで初期テーブル作成とデータを挿入

node: 
  ・Node.jsの実行環境

-r dotenv/config
  ・スクリプトを実行する前にdotenvパッケージをロード
    (rオプションは、メインのモジュールを実行する前に
    実行するモジュール)
  ・dotenvを使うと、.envファイルに定義された値を
    環境変数として使うことができる
  ・dotenvは開発環境やテスト環境で環境変数を管理する
    目的でよく使用される

  ⇒開発時はローカルで.envを配置し、
    本番ではHostingサービスの機能で環境変数として設定

./scripts/seed.js
  ・実行するJSファイルのパス
  ・seed.jsはplaceholder-data.jsからmodule.export
    したデータを使って、DBの初期データを作成している
  ・詳細は今回関係ないので省略(primary keyがuuidなのが
    個人的に気になる。SQLの過ちは見つけやすくなりそう)
  ・https://www.bytebase.com/blog/choose-primary-key-uuid-or-auto-increment/</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>winでinstallしたbcryptはlinuxでは動かない(bcryptはpasswordのハッシュ化に利用している)</li>
<li>気分でwslとか動かしている場合はerrorのもとになるので注意</li>
</ul>
</div>
<h3 id="verceldb">vercelでDBを検索してみる</h3>
<pre class="highlight"><code class="language-text">・Dataを選ぶ
・BrowserとQueryがある
・クエリの実行で見る方が楽だと思う</code></pre>
</details>
<h2 id="q10-nextjsdb">Q10 Next.jsからDBのデータをフェッチする方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="react-server-component">React Server Component</h3>
<pre class="highlight"><code class="language-text">React Server Component
  ・サーバ上でレンダリング可能
  ・キャッシュするUIを作成可能

サーバレンダリングの利点
  ・データフェッチをDBに近いサーバから行えるので、
    フェッチにかかる時間が減少する

  ・トークンやAPIキーなどの機密事項をクライアントに
    公開するリスクがなくなる

  ・サーバ上でレンダリングすることで、結果をキャッシュ
    でき、複数人のクライアントのリクエストで再利用できる

  ・ブラウザ側でDL,解析、実行するJSが少なくなるので、
    回線速度が遅いユーザにとってうれしい

  ・サーバ側で、HTMLを生成しておけば、クライアントが
    JSをDL、解析、実行する時間を必要としないため、
    ページの表示速度があがる

  ・サーバ側でレンダリング済みなので、検索クローラーの
    見落としが少なくなる

  ・レンダリング作業をチャンクに分割し、準備が出来たら
    その都度クライアント側に提供できるので、ページ全体が
    レンダリングされるのを待つ必要がない（先に一部を
    確認可能）

)Server Componentを使わない場合(DB関連)
  ・クライアントから直接DBにクエリを実行すると
    DBの機密が漏洩する
  ・そのためサーバ上で実行されるAPIレイヤを介して
    クライアントに結果を送信する
  ・セキュリティの観点から、APIエンドポイントの認証
    認可の処理も必要になるだろう

React Server Componentsを使う(デフォルトはこれ)
  ・サーバ上でクエリを実行し、結果をクライアントに送信
  ・APIレイヤを介さずに、DBに直接クエリを実行可能
  ・Server Componentsなので、useEffectやuseStateを
    使わない、より効率的な非同期タスク解決手段が使える
  ・必要なのは、DBと対話するロジックになるので直感的
</code></pre>
<h3 id="vercelpostgres">@vercel/postgres</h3>
<pre class="highlight"><code class="language-text">・DBに対して、クエリを実行するために必要
・SQL-injectionに対する保護を提供してくれている
・Server Componentsで使うこと！！！

sql(importするやつ)
  ・templateを使用して、SQLクエリを構築可能
  ・process.env.POSTGRES_URLで指定したDBに接続する
  ・単一のクエリに対して使用する
  ・推奨されている

使用例
  import {sql} from "@vercel/postgres";

  const likes = 100;
  const {rows, fields} =
    await sql&lt;type&gt;`
      select * 
      from users
      where likes &gt; ${likes} 
      limit 5
    `;

db
  ・Postgresデータベースに接続するクライアントを作成
  ・トランザクションを実行する場合
  ・複数のクエリを作成する必要がある場合に使用

使用例
  import { db } from "@vercel/postgres";

  const client = await db.connect();
  await client.sql`select * from users`;

参考
  ・https://vercel.com/docs/storage/vercel-postgres/sdk#sql</code></pre>
<h3 id="_23">補足</h3>
<pre class="highlight"><code class="language-text">・今回のコースでは、/app/lib/data.tsに
  Select文が既に書かれていたので、
  関数を呼ぶだけでよさそう</code></pre>
<h3 id="_24">データを取得してみる</h3>
<pre class="highlight"><code class="language-text">・Dataをフェッチするために非同期コンポーネントにする
・件数を取得するときは、count(*)を使っている
  行数だけに関心があるなら、全行を送る必要はないので</code></pre>
<pre class="highlight"><code class="language-tsx">import { Card } from "../ui/dashboard/cards";
import RevenueChart from "../ui/dashboard/revenue-chart";
import LatestInvoices from "../ui/dashboard/latest-invoices";
import { lusitana } from "../ui/fonts";
import {
  fetchRevenue,
  fetchLatestInvoices,
  fetchCardData,
} from "@/app/lib/data";

export default async function Page() {
  const revenue = await fetchRevenue();
  const latestInvoices = await fetchLatestInvoices();
  const {
    numberOfCustomers,
    numberOfInvoices,
    totalPaidInvoices,
    totalPendingInvoices,
  } = await fetchCardData();
  return (
    &lt;main&gt;
      &lt;h1 className={`${lusitana.className} mb-4 text-xl md:text-2xl`}&gt;
        Dashboard
      &lt;/h1&gt;
      &lt;div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4"&gt;
        &lt;Card title="Collected" value={totalPaidInvoices} type="collected" /&gt;
        &lt;Card title="Pending" value={totalPendingInvoices} type="pending" /&gt;
        &lt;Card title="Total Invoices" value={numberOfInvoices} type="invoices" /&gt;
        &lt;Card
          title="Total Customers"
          value={numberOfCustomers}
          type="customers"
        /&gt;
      &lt;/div&gt;
      &lt;div className="mt-6 grid grid-cols-1 gap-6 md:grid-cols-4 lg:grid-cols-8"&gt;
        &lt;RevenueChart revenue={revenue} /&gt;
        &lt;LatestInvoices latestInvoices={latestInvoices} /&gt;
      &lt;/div&gt;
    &lt;/main&gt;
  )
}</code></pre>
<h3 id="_25">リクエストウォーターフォール</h3>
<pre class="highlight"><code class="language-text">・awaitは、前のリクエストがデータを返した後にのみ
  開始される
・したがってパフォーマンスに影響を与える可能性がある
・（もちろん前のリクエストから返されたデータに
  依存する場合は必須だが）</code></pre>
<h3 id="_26">並列データフェッチ</h3>
<pre class="highlight"><code class="language-text">・Promise.all()や、Promise.allSettled()を使う
・パフォーマンスの向上につながる一方で、たとえばallの
  場合、1つrejectになると、結果がrejectedになる。
  allSettledの場合、すべてのpromiseが完了するまで
  待つ必要があるという懸念点がある    </code></pre>
</details>
<h2 id="q11">Q11 静的レンダリングと動的レンダリングについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_27">静的レンダリング</h3>
<pre class="highlight"><code class="language-text">・データのフェッチとレンダリングがビルド時/再検証時に
  サーバ上で行われる

・結果はCDN(Contents Delivery Network)に配信される。

・再検証には、時間ベースやイベントに基づくものがある</code></pre>
<h3 id="_28">静的レンダリングの利点と使い道</h3>
<pre class="highlight"><code class="language-text">高速化
  ・事前にサーバ上でレンダリングされたコンテンツを
    キャッシュしてCDNを通してグローバルに配信するので、
    ユーザは地理的に近い場所からアクセスできる

サーバ負荷の軽減
  ・コンテンツはキャッシュされるので、ユーザのリクエスト
    ごとにコンテンツを動的に生成する必要がない

SEO
  ・事前にレンダリングされているため、ページの読み込み時
    にすでに利用可能になっている
  ・よって、クローラーによるインデックス付け
  （検索エンジンのDBに登録する事）が容易

使い道
  ・ユーザ間で共有されるデータのUI

使えないところ
  ・定期的に更新されるユーザ単位で最適化されたデータ</code></pre>
<h3 id="_29">動的レンダリング</h3>
<pre class="highlight"><code class="language-text">・リクエスト時（ユーザがページにアクセスした時）に、
  各ユーザのコンテンツがサーバ上でレンダリングされる</code></pre>
<h3 id="_30">動的レンダリングの利点と使い道</h3>
<pre class="highlight"><code class="language-text">リアルタイムなデータ
  ・アクセス時のデータを使えるので、頻繁に更新される
    データに便利

ユーザ固有のデータ
  ・アクセスした人によってフェッチ内容が変わるデータに
    最適

リクエスト時の情報
  ・CookieやURLの検索パラメータなどリクエスト時に
    知ることができる情報にアクセス可能
</code></pre>
<h3 id="_31">レンダリングする際にどちらが使われるか</h3>
<pre class="highlight"><code class="language-text">デフォルト
  ・静的レンダリング

動的関数
  ・cookies(), headers(), searchParams()などの
    ユーザのCookie,現在のリクエストヘッダ、
    URLの検索パラメータをするための関数

動的関数を使った場合
  ⇒ルート全体が動的レンダリングされる

キャッシュされていないデータが要求された場合
  ⇒ルート全体が動的レンダリングされる

キャッシュされていないときとは...?
  ・fetch requestにcache: "no-store"が追加されている
    (リクエストレベルでキャッシュを制御)
  ・fetch requestにrevalidate: 0が追加されている
    (pageレベルでキャッシュを制御
    これを指定すると、pageは常にserverから再生成される)
  ・fetch requestがPOSTメソッドを使うRouter handlerの
    中に来る
  ・fetch requestがheader(), cookies()の使用後に来る
  ・const dynamic = "force-dynamic"という
    ルートセグメントオプションが使われている
  ・etc...

例
  ・fetch("https://...", {cache: "no-store"});
  ⇒二回目以降も動的レンダリングになる</code></pre>
<h3 id="unstable_nostore">unstable_nostore</h3>
<pre class="highlight"><code class="language-text">・実験的なAPIだが、サーバコンポーネント内で呼び出すと、
  静的レンダリング⇒動的レンダリングに変更できる</code></pre>
<pre class="highlight"><code class="language-tsx">/*
unstable_noStoreはfetch(..., {cache: "no-store"})
と同等。追加オプションを許容するならno-storeでもいい

export const dynamic = "force-dynamic"を行うと
同一ファイルが全て動的になるので、これより柔軟
*/
import { 
  unstable_noStore as noStore 
} from 'next/cache';

export async function fetchRevenue() {
  noStore();
  await new Promise(
    (resolve) =&gt; setTimeout(resolve, 3000)
  );
  // ...
}
</code></pre>
<h3 id="_32">上記(動的レンダリング)の問題点</h3>
<pre class="highlight"><code class="language-text">・データをフェッチするのに3秒かかっており、
  その間、ページ全体がブロックされている</code></pre>
</details>
<h2 id="q12">Q12 ストリーミングについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_33">ストリーミング</h3>
<pre class="highlight"><code class="language-text">・ルートを小さなチャンクに分割し、準備が整ったものから
  サーバ⇒クライアントへと段階的にデータを転送する技術

・準備できたデータから読み込まれるので、一部が読み込まれ
  ていない間も、ページの一部を操作可能

・各コンポーネントをチャンクとみなすことが可能</code></pre>
<h3 id="nextjs">Next.jsでのストリーミングの実装</h3>
<pre class="highlight"><code class="language-text">ページレベル
  ・loading.tsxファイルを使う

特定のコンポーネントの場合
  ・&lt;Suspense /&gt;を使う</code></pre>
<h3 id="loadingtsx">loading.tsxについて</h3>
<pre class="highlight"><code class="language-text">・loading.tsxはSuspense上に構築された特別なNext.js-file

・pageコンテンツの読み込み中に代替として表示する
  フォールバック(予備)UIを作成する

・静的なComponentはすぐに表示され、フォールバックの対象
  にはならない

・ユーザはページの読み込みが完了するまでの間、
  静的なコンテンツと、代替のUIを見ることが可能

※ファイルシステムでいう下位ページ全てに影響を与える
  事に注意</code></pre>
<h3 id="loadingtsx_1">loading.tsxの例</h3>
<pre class="highlight"><code class="language-tsx">/*
ページ全体をストリーミングする

app/dashboard/loading.tsx
*/

export default function Loading(){
  return &lt;div&gt;Loading...&lt;/div&gt;;
}</code></pre>
<h3 id="_34">読み込み（ロード）スケルトンについて</h3>
<pre class="highlight"><code class="language-text">・多くのWebサイトでは、コンテンツが読み込まれている事を
　ユーザに示すためにプレスホルダーを使う

・埋め込むUIは、loading.tsxファイルの一部に埋め込まれ
  静的ファイルの一部として最初に送信される

・その後、動的コンテンツがストリーミングで段階的に
  読み込まれる</code></pre>
<h3 id="_35">ロードスケルトンの例</h3>
<pre class="highlight"><code class="language-tsx">/*
app/dashboard/loading.tsx
*/

import DashboardSkeleton from "@/app/ui/skeletons";

export default function Loading(){
  return &lt;DashboardSkeleton /&gt;;
}</code></pre>
</details>
<h2 id="q13">Q13 ルートグループについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="q12_1">Q12までの問題点</h3>
<pre class="highlight"><code class="language-text">・app/dashboard/loading.tsxという位置に配置したため、
  app/dashboard/*/page.tsxといったページにも適用
  されてしまっている</code></pre>
<h3 id="_36">ルートグループ</h3>
<pre class="highlight"><code class="language-text">作り方
  ・フォルダ名を括弧で囲むことによって作成できる

使いどころ
  ・URLパス構造に影響は与えたくないが、論理グループを
    作りたい場合

  ・たとえば/dashboard/(overview)/loading.tsxとした
    場合、/dashboard/invoices/page.tsxに影響はなくなる
    ⇒同階層（または子ディレクトリ）でないため

  ・また、大規模なアプリの場合は機能ごとに分割することも
    できる

注意点
  ・相対パスだとimportがずれる
  ・そのためにtsconfig.jsonのpathがある   
  "paths": {
    "@/*": ["./*"]
  }
  の場合、@/app/uiは、tsconfig.jsonから見た相対パス
  である、./app/uiに解決される。
  これにより、(overview)を作っても問題がなくなる</code></pre>
</details>
<h2 id="q14-suspense">Q14 Suspenseについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="react18suspense">React18と<code>&lt;Suspense /&gt;</code></h3>
<pre class="highlight"><code class="language-text">React17以前
  ・一度始まったレンダリングは必ず最後まで行われていた
  ・レンダリングを中断したり、完了するまでに別の
    レンダリングを始めることはできなかった

React18概要
  ・レンダリングの実行中に別のレンダリングを始める
    ⇒可能

  ・レンダリングを途中で停止して破棄する
    ⇒可能

  ・なお、最終的なレンダリング結果がstateに対応している
    のは保証されている！</code></pre>
<h3 id="1">新機能1(レンダリングのバッチ化)</h3>
<pre class="highlight"><code class="language-text">・複数の状態が更新された時、
  レンダリングがまとめて行われるようになった

・React17までは、Promise,setTimeout,addEventLister
　等のイベント内の更新はバッチ処理されないという特徴が
　あったが、React18以降は、すべての更新が自動的にバッチ
　されるようになった
　この変更により、1つの状態変数が更新された中途半端な
　状態がレンダリングされなくなる
　以下の場合も、ボタンを押した時のレンダリング回数は1回</code></pre>
<pre class="highlight"><code class="language-tsx">function App(){
  const [count, setCount] = useState(0);
  const [flag, setFlag] = useState(false);

  function handleClick(){
    fetchSomething().then(()=&gt;{
      setCount(c =&gt; c+1);
      setFlag(f =&gt; !f);
    })
  }

  return(
    &lt;div&gt;
      &lt;button onClick={handleClick}&gt;Next&lt;/button&gt;
      &lt;h1 style={{color: flag ? "red" : "blue"}}&gt;{count}&lt;/h1&gt;
    &lt;/div&gt;
  )
}

//React17以前は以下の場合、レンダリング回数は1回
function handleClick(){
  setCount(c =&gt; c + 1);
  setFlag(f =&gt; !f);
}

//この場合は2回レンダリングしていた
setTimeout(()=&gt;{
  setCount(c =&gt; c+1);
  setFlag(f =&gt; !f);
}, 1000);

//※バッチ処理したくない場合
import {flushSync} from "react-dom";

function handleClick(){
  flushSync(()=&gt;{
    setCounter(c =&gt; c+ 1);
  });

  flushSync(()=&gt;{
    setFlag(f =&gt; !f);
  })
}</code></pre>
<h3 id="2">新機能2(トランジションの導入)</h3>
<pre class="highlight"><code class="language-text">・再レンダリングが非同期で処理可能になった

・たとえば&lt;input/&gt;要素への入力などユーザ操作による
  状態変化は即時レンダリングするが、

・検索結果の再レンダリングは裏側で処理し、完了次第
  反映する等の区分けができる
  (setTransition()の引数に渡したコールバック内での
  状態の更新が急ぐ必要のないものとみなされ、
  バックグラウンドで処理される。なお、裏での処理中に
  追加で入力が為され、状態が変化した場合、
  この処理中のレンダリングは破棄され、新しい値を元に
  裏でレンダリングが開始される)

⇒ユーザの操作を阻害せずに、重いレンダリングを裏側で
  実行できるように</code></pre>
<pre class="highlight"><code class="language-tsx">  import {startTransition} from "react";
  setInputValue(input); //即時実行

  //裏側で処理(処理次第表示が切り替わる)
  startTransition(()=&gt;{
    setSearchQuery(input);
  })

  //スケルトン処理もできる
  import {useTransition} from "react";
  const [isPending,startTransition] = useTransition();

  {isPending &amp;&amp; &lt;Spinner /&gt;}</code></pre>
<h3 id="3suspense-ssr">新機能3(<code>&lt;Suspense /&gt;</code>とSSR)</h3>
<pre class="highlight"><code class="language-text">・コンポーネントを&lt;Suspense /&gt;で囲むと、
  その部分のレンダリングを非同期に描画可能
⇒描画される前にも操作可能
⇒これはページを操作するためのJS読み込み(hydration)
　が非同期になったことと関係している。
  操作可能にするためのJSを非同期で読み込むことで、
  重い要素のレンダリングを待たずに、軽い部分が先に
  操作可能になる
⇒これはNext.jsでは&lt;Suspense /&gt;で実現されている</code></pre>
<pre class="highlight"><code class="language-tsx">//新機能を利用するには?
// ・エントリーポイントを変える

import {render} from "react-dom" //以前
const container = document.getElementById("app");
render(&lt;App tab="home" /&gt;, container);

import {createRoot} from "react-dom/client" //今
const container = document.getElementById("app");
const root = createRoot(container); 
root.render(&lt;App tab="name"/&gt;); 
// https://react.dev/blog/2022/03/08/react-18-upgrade-guide#updates-to-client-rendering-apis</code></pre>
<h3 id="nextjsreact-suspense">Next.jsでReact Suspenseを利用する</h3>
<pre class="highlight"><code class="language-text">・loading.tsxはページ全体をストリーミングにする
・&lt;Suspense&gt;を使えば、囲んだ部分だけのレンダリング部分を
  延期できる。

・Suspenseのpropsであるfallbackには、軽量な代替UIを指定
  childrenにはレンダーしようとしている実際のUIを指定する
  レンダーの準備が整うまで、代替UIが表示される</code></pre>
<pre class="highlight"><code class="language-tsx">//遅い部分だけをSuspenseを用いてストリーミングする
//残りの部分は常に同じ

//従来；全体が3秒間スケルトンに陥っていた
//結果:他のスケルトンがすぐに解消された

// app/dashboard/(overview)/page.tsx
import RevenueChart from "@/app/ui/dashboard/revenue-chart";
import LatestInvoices from '@/app/ui/dashboard/latest-invoices';
import { Suspense } from "react";
import { 
  RevenueChartSkeleton,
  LatestInvoicesSkeleton,
 } from "@/app/ui/skeletons";

export default async function Page() {
  // ここで、fetchしていたのをremoveした
  // ...
  // それぞれのcomponentの中でfetchすることで
  // Suspenseが生きてくる
  return (
    &lt;Suspense fallback={&lt;RevenueChartSkeleton /&gt;}&gt;
      &lt;RevenueChart /&gt;
    &lt;/Suspense&gt;
    &lt;Suspense fallback={&lt;LatestInvoicesSkeleton /&gt;}&gt;
      &lt;LatestInvoices /&gt;
    &lt;/Suspense&gt;
  )
}
// app/ui/dashboard/revenue-chart
import { fetchRevenue } from '@/app/lib/data';
export default async function RevenueChart() {
  const revenue = await fetchRevenue();
  // ...
}</code></pre>
<p><a class="glightbox" href="images/suspense.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Suspenseの画像" src="images/suspense.png" /></a></p>
<h3 id="component">Componentのグループ化</h3>
<pre class="highlight"><code class="language-text">・複数の似たようなコンポーネントをそれぞれ
  Suspenseでくくると、視覚的にうるさくなる

・したがって1つのグループとして読み込んだ方がいい
  こともある。（特に読み込み時間がほぼ同じなら）

・SuspenseでWrapperコンポーネントを囲うもよし、
  Suspenseの中に複数のChildrenを含めるもよし
  後者の場合、どれか1つでもデータ待ちなら、
  まとめてfallbackに置き換わる</code></pre>
<h3 id="suspense">Suspense境界の選定</h3>
<pre class="highlight"><code class="language-text">・一般的にはpage.tsxでfetchを行うのではなく、
  データが必要なコンポーネントで行い、
  ブロッキングを防ぐ目的で該当コンポーネントだけを
  &lt;Suspense /&gt;で囲むのがよいとされている

・しかし必要ならばloading.tsx等を用いて、
  ページ全体をストリーミングすることもできる</code></pre>
</details>
<h2 id="q15">Q15 部分プリレンダリングについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_37">注意点</h3>
<pre class="highlight"><code class="language-text">・Next.js v14で導入された機能であるため実験的</code></pre>
<h3 id="or">静的コンテンツ or 動的コンテンツ</h3>
<pre class="highlight"><code class="language-text">現在の問題点
  ・特定のルートは、静的レンダリングか、動的レンダリング
    のいずれかになっている

  ・ほとんどのルートは、本来静的な部分と動的な部分が
  　混じっているが、たとえばNext.jsの場合、動的関数や
    cookies()等を使うと、そのルートは動的レンダリングに
    なってしまう</code></pre>
<h3 id="partial-prerendering">Partial Prerendering(部分的なプリレンダリング)</h3>
<pre class="highlight"><code class="language-text">PPR
  ・ルートを静的に保ちながら、部分的に動的にする

  ・大半が静的レンダリングなため初期ロードは高速で、
    （ユーザに最も近いエッジリージョンから
      キャッシュが提供される）
    後から動的コンテンツが非同期で読み込まれる。

  ・なお、Suspenseのfallbackは、他の静的な部分と
    ともに埋め込まれ、事前レンダリングされる

  ・Suspenseで動的と静的の境界を作ることで、
    Next.jsは動的の部分を認識し、その部分だけを非同期で
    埋め込む</code></pre>
<h3 id="ppr">PPRの方法</h3>
<pre class="highlight"><code class="language-text">1 next.config.jsに以下の様に書く

experimental: {
  ppl : true
}

2 動的な部分に&lt;Suspense /&gt;を埋め込む

3 終わり

⇒普段からSuspenseを使っていれば、コードを書き換える
  必要がないのが魅力</code></pre>
</details>
<h2 id="q16-nextjsapi">Q16 Next.jsのAPIを用いて検索機能を実装する方法について知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_38">検索機能</h3>
<pre class="highlight"><code class="language-text">・たとえば、クライアントとサーバにまたがる検索機能を
  考える

・ユーザがクライアント上で検索
　⇒URLパラメータが更新
　⇒更新されたパラメータをもとにサーバ上でデータが取得
　⇒データをもとに、サーバ上でUIが再レンダリングされる</code></pre>
<h3 id="url">なぜURL検索パラメータを使うのか</h3>
<pre class="highlight"><code class="language-text">共有&amp;ブックマーク可能なURL
  ・検索パラメータはURLにあるため、URLをコピーする事で、
    ユーザは以前の検索結果にアクセスできるようになる

SSR(サーバサイドレンダリング)と初期ロード
  ・URLパラメータをサーバ上で直接使用して、
    初期状態をレンダリングするのでSSRの処理が容易になる

分析と追跡
  ・URLに検索クエリとフィルタを含めることで、
    ユーザが何を検索したか容易に追跡できるようになる</code></pre>
<h3 id="nextjs_1">検索機能実装に使えるNext.jsのフック</h3>
<pre class="highlight"><code class="language-text">・これらのフックはクライアントサイドで利用する
  (つまり、"use client"がないと使えない)

useSearchParams
  ・現在のURLのパラメータにアクセスする
  ・例として、
    /dashboard/invoices?page=1&amp;query=pendingなら、
    {page: "1", query: "pending"}と値を返す

usePathname
  ・現在のURLのパス名を読み取る
  ・例として
  ・https://www.XXXXXX.com/dashboard/invoicesなら
    "/dashboard/invoices"を返す

useRouter
  ・「クライアントコンポーネント」内の
    ルート間のナビゲーションを有効にする</code></pre>
<h3 id="_39">実装手順</h3>
<pre class="highlight"><code class="language-text">1 ユーザの入力をキャプチャする
2 検索パラメータを使用してURLを更新
3 URLを入力フィールドと同期させる
4 検索クエリを反映するようにUIを更新</code></pre>
<h3 id="1_1">1 ユーザの入力をキャプチャ</h3>
<pre class="highlight"><code class="language-text">・inputタグにonChangeイベントを付け、 
  入力値が変化するたびに、関数を呼び出すようにする</code></pre>
<pre class="highlight"><code class="language-tsx">function handleSearch(term: string){
}

&lt;input
  className="peer block w-full rounded-md border border-gray-200 py-[9px] pl-10 text-sm outline-2 placeholder:text-gray-500"
  placeholder={placeholder}
  onChange={(e) =&gt; {
    handleSearch(e.target.value);
  }}
/&gt;</code></pre>
<h3 id="2-url">2 検索パラメータを使用してURLを更新</h3>
<pre class="highlight"><code class="language-text">・useSearchParams()を用いて現在の検索パラメータを
  Objectにする

・URLSearchParamsを用いて、Objectを操作する。
  URLSearchParamsは、"query=hoge?page=1"のような
  文字列であっても、Objectであっても同じように変換可能
（読み取り以外もできるuseSearchParams()）

・入力値を、URLSearchParamsのインスタンスにquery
  という名前でsetする

・入力値が無い場合は、queryをdeleteしておく

・new URLSearchParams({page: "1", query: "pending"}).toString();
  が、page=1&amp;query=pendingという形になることを生かす

・useRouter()のreplaceは、指定したリンクにページ遷移
  可能。これと、usePathname()が現在のURL（検索パラメ
  ータ以外）を返すことを生かして、遷移を行う
⇒遷移時のコストについてはQ17を参照のこと</code></pre>
<pre class="highlight"><code class="language-tsx">//こっちはComponent直下に書く
const pathname = usePathname();
const { replace } = useRouter();

function handleSearch(term: string){
  const params = new URLSearchParams(searchParams);
  if(term){
    params.set("query", term);
  }else{
    params.delete("query");
  }
  replace(`${pathname}?${params.toString()}`);
}</code></pre>
<h3 id="3-url">3 URLと入力の同期を維持する</h3>
<pre class="highlight"><code class="language-tsx">// useSearchParams()から現在の検索パラメータを入手する
&lt;input
  className="peer block w-full rounded-md border border-gray-200 py-[9px] pl-10 text-sm outline-2 placeholder:text-gray-500"
  placeholder={placeholder}
  onChange={(e) =&gt; {
    handleSearch(e.target.value);
  }}
  defaultValue={searchParams.get("query")?.toString()}
/&gt;</code></pre>
<pre class="highlight"><code class="language-text">defaultValue vs value
  ・状態を使用して入力の値を管理している場合は、
    value属性を使う必要がある
  ・今回の場合、管理しておらず、必要なのはでデフォルト値
  　だけなのでdefaultValueでいい</code></pre>
<h3 id="4-ui">4 検索クエリをUIに反映する</h3>
<pre class="highlight"><code class="language-tsx">/*
フィールドがなくてもエラーにならないよう、型情報に
?をつけてoptionalにしている

query, currentPageについては最終的にクエリを取得する
際に使われる
*/
export default function Page({
  searchParams,
}: {
  searchParams?: {
    query?: string;
    page?: string;
  };
}) {
  const query = searchParams?.query || "";
  const currentPage = Number(searchParams?.page) || 1;
  //...
  }</code></pre>
<div class="admonition info">
<p class="admonition-title">Info</p>
<h3 id="params">フックとparams</h3>
<pre class="highlight"><code class="language-text">・サーバコンポーネントの場合は、propsを渡す。
  (フックが使えないので)
  (そもそもcacheしているサーバコンポーネントで
  使えたとしても取得値が古くなるので困るだけ)

・クライアントコンポーネントの場合は、フックを使用
  する。(useSearchParams())

・フックを使えばサーバに依存することがなくなるので
  パフォーマンスの観点からもよい</code></pre>
</div>
</details>
<h2 id="q17">Q17 ナビゲーションとキャッシュについて詳しく知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="link_1">クライアント側のナビゲーションについて(LINK補足)</h3>
<pre class="highlight"><code class="language-text">&lt;Link /&gt;
  ・遷移先が静的ルートなら、viewportに入ったときに
    完全にprefetch

  ・遷移先が動的ルートなら、ページ階層内で最初に見つかる
    loading.jsファイルまでの部分ルートがprefetchされる

  ・つまり、/dashboard/[id].tsxがviewportに入ると、
    /dashboard/[id]/lodaing.tsxまでの部分ルートが
    prefetchされる
    ⇒共有UIと、ローディング状態がすぐに表示され、
      そのあとで必要なデータが非同期に読み込まれる

動的ルート
  ・動的レンダリングとは異なる概念
  ・ファイル名に角括弧を使用して定義され、たとえば
    app/dashboard/[id].tsxのようになる
  ・動的ルートを使用することで、同一のコンポーネントを
    利用しながら異なるパラメータに基づいたページを生成
    可能

&lt;Link href="/dashboard prefetch={true}&gt;
  ・動的ルートでも完全なルートがprefetchされるようになる
  ・逆にfalseの場合、行われることはない

useRouter
  ・router.prefetch(url)とすることで、prefetchが可能
  ・設定がない場合はprefetchしない

共通
  ・Router Cacheと呼ばれるクライアント側のキャッシュに
    prefetchされた部分と、過去に訪問したページが
    保存されている。そのため再訪問する際に、
    Serverにリクエストを送る必要はない

  ・prefetch機能は、具体的にはRouter Cacheにページの
    データを保存することを意味しており、ページ遷移時には
    このキャッシュからデータを引き出して使用する
  ⇒つまり実際には遷移しなかったとしても、既に
    router cacheに含まれている。

  ※Router cacheはインメモリであることに注意。
    つまり、reloadをしたり、セッションが消えると消失する
    よって、URLバーに直接URLを打ち込んだりすると、
    prefetchの恩恵は得られない。

  ※逆に言えば、&lt;Link /&gt;やuseRouterによる遷移の場合、
    共通のUIが存在していればreloadは生じない。
    そして、/appに、layout.tsxを置く以上、共通のUIが
    存在していないことはない(ルートレイアウトを思い出す)
    よって、useRouter等のナビゲーション間における
    ページ全体のリロードは起きえない
    従って、Router cacheの恩恵を受けることができる
</code></pre>
<h3 id="routerpush-vs-routerreplace">router.push vs router.replace</h3>
<pre class="highlight"><code class="language-text">router.push(href: string, {scroll: boolean})
  ・提供されたルートへ遷移
  ・ブラウザの履歴に新しいスタックを追加
  ・SEOと異なりプリフェッチされないというのが懸念点
    （敢えてされたくない場合には有用？）
  ・タグは作成されないので、リンクがクローラーによって
    検出されることもないだろう
  ・考えられる使いどころとしてはイベントハンドラの結果
    遷移する場合だろうか

router.replace(href: string, {scroll, boolean})
  ・ブラウザの履歴を置き換える
  ・リダイレクトしたいときには便利（戻らせたくないので）

router.refresh()
  ・router cacheを無効化する
  ・Data Requestも再フェッチ
  ・Server Componentも再レンダリング
  ・useStateの状態やブラウザの状態は失われない

router.prefetch(href: string)
  ・提供されたルートをプリフェッチする

router.back()
  履歴スタックの前のルートに戻る

router.forward()
  履歴スタックの次のページに進む
</code></pre>
<h3 id="4cache">4つのcache</h3>
<pre class="highlight"><code class="language-text">・デフォルトの場合、ルートは静的レンダリングされ、
  データ要求はcacheされる</code></pre>
<h3 id="request-memorizationreact">Request Memorization(Reactの機能)</h3>
<pre class="highlight"><code class="language-text">・fetch APIを拡張したもの
・同じURLとoptionを持つリクエストを自動的にメモ化

・ルートのレンダリング中に、特定のリクエストが初めて
  呼び出されると、その結果がメモリに保存される

・二回目以降はcacheの値がメモリから返される

・レンダリングパスが完了すると、メモリはリセットされる
  つまり、複数リクエスト間で、Request Memorizatonは
  共有できない

・メモ化はfetchリクエストのGETメソッドにのみ適用される
  fetchが使えない場合、React Cacheを直接使うといい

・これはルート全体で同じデータを使用したいとき、
  コンポーネント間でpropsを転送する必要がなくなる
  事を意味する。そこかしこにfetch()を書いたとしても、
  同一レンダリング中でURLとオプションが同じなら
  コストはかからない。</code></pre>
<pre class="highlight"><code class="language-tsx">async function getItem(){
//結果は自動でメモ化される
  const res = await fetch("https://.../item/1");
  return res.json();
}

const item = await getItem(); //cache MISS

const item = await getItem(); //cache HIT!!!</code></pre>
<h3 id="data-cache">Data cache</h3>
<pre class="highlight"><code class="language-text">・Reqeust及び、deployment全体にわたってデータフェッチの
  結果を保持する

・異なるユーザ間、異なるデプロイ間であっても、
  同一リクエストであればData Cacheから返してくれる

・そのためDBのデータが変更されても、同一リクエストで
  あれば以前の結果が返ってくる恐れがある。
  そのために、「再検証」が用意されている

・Request Memorizationは、レンダリングごとに必ず
  メモリが空になるため、fetchを行う場合
  レンダリング毎に1回はData Cacheへのリクエストが
  為されることになる

時間ベースの再検証
  ・一定の時間が経過した後で、新しいリクエストが
    行われた場合、「リクエストの後で」データを再検証する
  ・変更頻度が低く、鮮度がそれほど重要でないならOK

  例）
    ・時間ベースを60秒に設定する
    ・60秒以内に呼び出されたrequesetはcacheから返す
    ・60秒を過ぎても次のリクエストもcacheから返す
    ・そのあとで、データの再検証を行う
    ・再検証が成功すれば新しいデータにdata cacheを
      更新する。
    ・失敗した場合、以前のdata cacheを保持する

オンデマンド再検証
  ・フォーム送信などのイベントに基づき、データを再検証
  ・最新のデータをできるだけ早く表示したいときに使用

  ・revalidateTag
    特定のキャッシュタグに関連するデータのcacheを無効化

  ・recaludatePath
    指定されたパスが次に訪れられた時にcacheを無効化
    cacheにはdata cacheとfull route cacheが含まれる</code></pre>
<pre class="highlight"><code class="language-tsx">//時間ベース
//値は秒単位

fetch("https://...", {next: {revalidate: 3600}});

//オンデマンド再検証
import {
  revalidateTag, 
  revalidatePath
} from "next/cache";

//cache MISS
fetch("https://...", {next: {tags: ["a"]}});
revalidateTag("a");
//cache MISS
fetch("https://...", {next: {tags: ["a"]}});

/*
 dashboard/を訪れたとき、
 data cacheが再検証され
 full route cacheも一時的に無効になる

 ⇒関数を呼び出した後で、再度訪れたときに、
  cacheを無効化する。
  data cacheもfull route cacheも
  新しいデータで構築される
*/
revalidatePath("/dashboard");</code></pre>
<h3 id="cache">個々のcacheの無効化</h3>
<pre class="highlight"><code class="language-tsx">//cacheが保存されないので、fetchの度に
//データがフェッチされる
fetch("https://...", {cache: "no-store"});

//此方の場合、ルートのすべてのデータリクエストに影響
export const dynamic = "force-dynamic";</code></pre>
<h3 id="full-route-cache">full route cache</h3>
<pre class="highlight"><code class="language-text">・ビルド時（または再検証時）に「静的レンダリング」された
  ルートに対して、サーバ側でRSC PayloadとHTMLを生成し
  full route cacheとして保存する

・実際のレンダリング時にはRSC PayloadとHTMLが使われる
  ので、クライアント側から静的ルートにアクセスした時には
  既に、リクエストは必要ない

・なお、Data cacheと異なり、再デプロイ時に
  cacheは破棄される

・動的ルートに対しては、full route cacheへの保存はskip
  される(request時にレンダリングするため)

・opt-outしたい場合は動的関数を使うか、revalidate = 0
  もしくはdynamic = "force-dynamic"を使う
  fetch()キャッシュされていないrequestがある場合も同様
</code></pre>
<h3 id="rsc-payload">そもそもRSC Payloadとは</h3>
<pre class="highlight"><code class="language-text">・レンダリング作業は、個々のルートセグメントと
  Suspenseによって分割され、チャンク単位で行われる

・Server Componentは、React Server Component payload
  というストリーミング用に最適化された特別なデータ形式
  に変えられる(Reactによって)

・React Server Component payloadは、レンダリング
  されたReactサーバコンポーネントツリーのバイナリ表現

・RSC payloadはブラウザのDOMを更新するために
  クライアント上のReactによって使用される。
  また以下のものが含まれる

  1 サーバコンポーネントのレンダリング結果
  2 クライアントコンポーネントをレンダリングする場所の
    プレスホルダーとそのJSファイルの参照
  3 サーバコンポーネントからクライアントコンポーネント
    に渡されるすべてのprops</code></pre>
<h3 id="_40">レンダリングの流れについて</h3>
<pre class="highlight"><code class="language-text">※SC(=Server Component)
※CC(=Client Component)

-- サーバ側 --
1 SCからRSC Payloadをレンダリングする

2 RSC Payload + CCのJS命令から初期表示のためのHTMLを
  レンダリングする
  (CCのJS命令には[おそらく]クライアントコンポーネント
  自体とその返り値であるJSXが含まれるが、hydrateで
  付与されるようなイベントリスナは含まれない)

3 RSC PayloadとHTMLについてはサーバ上にキャッシュされ、
  これがfull route cacheとなる

-- クライアント側 --
4 HTMLをもとに、非インタラクティブな画面を即時表示

5 RSC Payloadをもとに、SCとCCをツリー上で紐づけて
  レンダリング(placeholderを使う)
  (HTMLをレンダリングしている時点でDOM構造は生成されて
  いるはず。とすると、2と4の結果が異なった場合、
  DOMが一致しないとみなされて、react17以前なら
  ページ全体が再レンダリング。react18なら、Errorが
  出ると考えるべきか。)

6 JSをhydrateし、CCをインタラクティブにする
  (事前に読み込んだHTMLにJSでイベントリスナなどを
  付与していく = hydrate)

-- その後 --

7 以後、RSC Payloadは、ルートを訪れる度にクライアント
  側のrouter cacheに保存される
  (初回読み込み時にすでにDOMが作られているので、
  2回目以降はRSC Payloadを参照し、その差分を見るだけで
  済む。)

・よって、router cacheに保存されている場合、server 
  componentへのリクエストの送信は要らなくなる

・初回のリクエストの場合、動的レンダリングはfull route
  cacheに保存されないので、Data cacheもしくはData本体を
  見に行く必要がある。静的レンダリングの場合、
  full route cacheを見に行くだけで済む

・ 二回目以降のリクエストの場合、時間以内ならrouter 
   cacheを見に行くだけで済む(静的でも動的でも)

※Client Componentの場合は毎回読み込む必要がある。
  初回読み込み時にサーバでレンダリングされたHTMLは
  二回目以降は使われない。
  ただし、Next.jsでは初回アクセス時にクライアント
  コンポーネントのJSバンドルがサーバ側からdispatch
  されているはずなのでサーバ側へのアクセスは不要

hydrate関連のエラーを防ぎたい場合
  ・useEffectがhydrate後に行われることを利用する
  ・ただし、レンダリングを遅延させただけなので、
    SSG/SSRの恩恵が受けられなくなる。

SC -&gt; CCにpropsを渡せる理由
  ・CCはpropsが何によって埋められるかについて感心を
    持たないため、SCの結果を渡すことが可能
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>CCはクライアント側以外でもレンダリングされる</li>
<li>紛らわしい名前だ。8時間返してくれ</li>
</ul>
</div>
<h3 id="router-cache">router cache</h3>
<pre class="highlight"><code class="language-text">・すでに上記で触れたけど.....
・Client-side CacheやPrefetch Cacheと呼ばれたりする
・Prefetch Cacheの場合、prefetchされたルートセグメント
  のみを指していたりする

・訪問済みのルートと、プリフェッチされたルートに適用
  されるインメモリのクライアント側キャッシュ

・クライアント側なので、revalidate = 0や、
  dynamic = "force-dynamic"の影響は受けない
  ※ただし、revalidatePath, revalidateTagの影響は受ける
  ※router.refreshを行うことでも無効になる
  ※cookiesで古い値が使われるのは好ましくないので
    cookies.setやcookies.deleteでも無効となる

・インメモリなのでreloadやタブ閉じで消える

・自動無効化期間が存在し、動的ルートなら30秒
  静的ルートなら5分で無効化される
  ※ただし、prefetch={true}を追加した場合、
    動的ルートの無効化期間は5分に変えられる
</code></pre>
<h3 id="_41">注意点</h3>
<pre class="highlight"><code class="language-text">・Data cacheを無効化 ⇒　full route cacheも無効化
・full route cacheを無効化 ⇒ Data cacheに効果はない
  (動的関数を使ったりとか)
・Data cacheとrouter cacheを無効化するには、
  server actionsでrevalidatePath / revalidateTagを使う
・Vercelでデプロイしている場合、オンデマンド再検証の
  結果は300ミリ秒以内にすべてのリージョンに伝播する</code></pre>
<h3 id="_42">参考</h3>
<pre class="highlight"><code class="language-text">・https://nextjs.org/docs/app/building-your-application/caching#router-cache</code></pre>
</details>
<h2 id="q18-debounce">Q18 debounceについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="debounce">debounce</h3>
<pre class="highlight"><code class="language-text">・JSのクイズ(中級9)にも書いた

概要
  ・連続して大量に繰り返される処理が、
    指定時間以内に複数回発生する場合、
    最後の1回だけ実行する

使いどころ
  ・inputに対してonChangeを付けた場合のことを考える
  ・1文字入力＝イベント1回とすると、無駄なリソースを食う
  ・そのためdebounceを使う

実装方法
  ・JSのクイズではデコレータとsetTimeoutを用いて
    期間内に再度実行された場合、以前のものを
    clearTimeoutしていた

  ・今回はuse-debounceを用いる
    (npm i use-debounce)

効果
  ・単純にDBに送信されるリクエストの数が減るので、
    リソースが節約される</code></pre>
<pre class="highlight"><code class="language-tsx">import { useDebouncedCallback } from 'use-debounce';

//300ミリ秒以内に再度発火すると実行されない
//300ミリ秒経った時点で実行される
const handleSearch = useDebouncedCallback((term)=&gt;{
  console.log(`Searning ${term}`);
}, 300);
</code></pre>
</details>
<h2 id="q19">Q19 ページネーションを追加する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_43">方針</h3>
<pre class="highlight"><code class="language-text">・SQLでcount(*)を用いてHITする行数を取得する
・一ページに表示する個数を定数から取得し、行数から割る
・Math.ceil()で切り上げた値を返すことで総ページを取得
・現在のqueryパラメータは変えないまま、pageパラメータ
  を新しい値でsetする
・これをもとに新しいURLを作成し、LINKのhrefに渡す

・なお、ユーザが新しい検索クエリを入力した時は
  ページ番号が1になるようにする</code></pre>
<h3 id="_44">コード例</h3>
<pre class="highlight"><code class="language-tsx">const searchParams = useSearchParams();
const handleSearch = useDebouncedCallback((term) =&gt; {
  const params = new URLSearchParams(searchParams);
  params.set("page", "1");
  // ...
}, 300);

// -----------------------

/*
ILIKEはpostgresql独自の機能で大文字小文字区別なしのLIKE
::はcast
*/
export async function fetchInvoicesPages(query: string) {
  noStore();
  try {
    const count = await sql`SELECT COUNT(*)
    FROM invoices
    JOIN customers ON invoices.customer_id = customers.id
    WHERE
      customers.name ILIKE ${`%${query}%`} OR
      customers.email ILIKE ${`%${query}%`} OR
      invoices.amount::text ILIKE ${`%${query}%`} OR
      invoices.date::text ILIKE ${`%${query}%`} OR
      invoices.status ILIKE ${`%${query}%`}
  `;

    const totalPages = Math.ceil(Number(count.rows[0].count) / ITEMS_PER_PAGE);
    return totalPages;
  } catch (error) {
    console.error('Database Error:', error);
    throw new Error('Failed to fetch total number of invoices.');
  }
}

// -----------------------
import Pagination from "@/app/ui/invoices/pagination";
import { fetchInvoicesPages } from "@/app/lib/data";
export default async function Page({
  searchParams,
}: {
  searchParams?: {
    query?: string;
    page?: string;
  };
}) {
  const query = searchParams?.query || "";
  // ...
  const totalPages = await fetchInvoicesPages(query);
  // ...

  return(
    {/* ... */}
    &lt;div className="mt-5 flex w-full justify-center"&gt;
      &lt;Pagination totalPages={totalPages} /&gt;
    &lt;/div&gt;
  )
}
// -----------------------

export default function Pagination({ 
  totalPages 
}: { totalPages: number }) {

  const pathname = usePathname();
  const searchParams = useSearchParams();
  const currentPage = Number(searchParams.get("page")) || 1;
  //配置場所などに使う
  //currentPageがあることで、現在位置を基準に表示可能
  //最小7つのカラムを表示しようと考えているため
  //totalPagesが7以下の場合は挙動を変える
  const allPages = generatePagination(currentPage, totalPages);

  //LINKのhrefの返り値として使用する
  const createPageURL = (pageNumber: number | string) =&gt; {
    const params = new URLSearchParams(searchParams);
    params.set("page", pageNumber.toString());
    return `${pathname}?${params.toString()}`;
  }
  return(
    // ...
  )
}</code></pre>
</details>
<h2 id="q20-react-server-actions">Q20 React Server Actionsについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="react-server-actions">React Server Actions</h3>
<pre class="highlight"><code class="language-text">・クライアント側等からサーバ上の非同期関数を
  実行できるようにする機能
  (実際にはuse serverの影響下にある関数は、
   SCからもCCからもimport可能)

・サーバ側に処理を移譲する過程で、APIが不要になる</code></pre>
<h3 id="_45">サーバアクションの魅力</h3>
<pre class="highlight"><code class="language-text">・アプリの安全性が強化される

・クライアントでJSが無効になっている場合でも、フォームが
  機能する。
⇒つまり、hydrateが完了する前でも対話的な操作が可能！！！

・クライアント側にあるフォームのデータをサーバ上で
  取り扱える

・Next.jsキャッシュと統合されているので、フォーム送信時
  等にrevalidateTag等を利用してcacheの再検証ができる</code></pre>
<h3 id="_46">使い方</h3>
<pre class="highlight"><code class="language-text">・関数またはページの冒頭に"use server"を記載する

・"use server"はサーバサイドのファイルにのみ記載可能

・Server actionsの結果はpropsを通じてCCに渡される

・Server actionsが、&lt;form action&gt;やformActionに
  渡される場合は自動的にtransitionの中で呼び出される

・上記に当てはまらない場合、useTransition等を使い、
  トランジションの中で呼び出し、裏側で処理する必要がある

・Server Actionsはサーバ側の状態を書き換えるために
  使用される。つまりcreate/insert/delete処理には最適
  だが、select処理には推奨されない

・Server Actionへの引数はクライアント側で制御されるため
  その入力は信頼できないものとしてエスケープする

・クライアント側からサーバアクションを呼び出す場合、
  ネットワークを経由するため、引数はシリアライズ
  可能である必要がある</code></pre>
<h3 id="_47">使用例</h3>
<pre class="highlight"><code class="language-ts">
/*
通常formのaction属性は、APIエンドポイントとなるが、
Reactでは特別なpropsとみなされる

以下の場合、サーバ関数であるcreateInvoiceへの
ネットワークリクエストが発生

更に、フォームのFormDataがサーバアクションの第1引数
として渡される

FormData
  ・フォームフィールドおよびそれらの値から表現される
    キーと値のペアを操作するためのもの
  ・対象になるのはフォームの各要素(input, textarea,
    select等)

  ・key : name属性
  ・value: 要素の値。
*/
import { createInvoice } from "@/app/lib/actions";
export default function Form({
  customers,  
}: {
  customers: customerFiled[];
}){
  return (
    &lt;form action={createInvoice}&gt;
    {/* ... */}
    &lt;/form&gt;
  )
}

//----------------------

"use server";
export async function createInvoice(formData: FormData){
  const rawFormData = {
    customerId: formData.get("customerId"),
    amount: formData.get("amount"),
    status: formData.get("status"),
  };

  //要素がたくさんある場合は、
  //Object.fromEntries(formData.entries())が使える
  console.log(rawFormData);
}</code></pre>
</details>
<h2 id="q21">Q21 データや型を検証する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_48">使いどころ</h3>
<pre class="highlight"><code class="language-text">・DBに値を保存するうえでは型や形式になってくる
・そんな時zodが使える</code></pre>
<h3 id="_49">基本的な使い方</h3>
<pre class="highlight"><code class="language-tsx">import { z } from "zod";

//string型を作成
const mySchema = z.string();

//string型ならそのまま値を出力
mySchema.parse("12"); // =&gt; "12"
//string型でないならエラーを投げる
mySchema.parse(12); //throws ZodError

//safeParseは型が異なっていてもエラーを投げない
mySchema.safeParse("12");
// {success: true, data: "12"};
mySchema.safeParse(12);
// {success: false, error: ZodError}

//強制的に文字列型に変換
const schema = z.coerce.string();
schema.parse(12); // "12"

//以下の様にさらに場合分けも可能
z.number().min(5); //5以下の数値

//inみたいなもの
z.enum(["a", "b"]);

//object型のスキーマを作成
const schema = z.object({
  str: z.string(),
  num: z.number()
})

//特定のプロパティを削除可能
schema.omit({str: true});

//特定のプロパティだけを持ってくる
schema.pick({str: true});

//型生成も可能
const A = z.string();
type A = z.infer&lt;typeof A&gt;;

//エラーメッセージをカスタムする
z.string({
invalid_type_error: "Please select a customer.",
})

//参考
//https://github.com/colinhacks/zod
//https://zenn.dev/uttk/articles/bd264fa884e026</code></pre>
<h3 id="_50">実用例(型を確かめてから挿入している)</h3>
<pre class="highlight"><code class="language-tsx">"use server";

import { z } from "zod";
import { sql } from "@vercel/postgres";
import {revalidatePath} from "next/cache";
import {redirect} from "next/navigation";

const FormSchema = z.object({
  id: z.string(),
  customerId: z.string(),
  amount: z.coerce.number(),
  status: z.enum(["pending", "paid"]),
  date: z.string(),
})

const CreateInvoice = FormSchema.omit({ id: true, date: true });

export async function createInvoice(formData: FormData) {
  const { customerId, amount, status } = CreateInvoice.parse({
    customerId: formData.get("customerId"),
    amount: formData.get("amount"),
    status: formData.get("status"),
  });
  //centにしている。
  //ドルで保存すると浮動小数点エラーの可能性があるため
  const amountInCents = amount * 100;
  /*
  new Date()
    Mon Mar 25 2024 01:30:36 GMT+0900
  .toISOString()
    2024-03-24T16:30:41.593Z
  */
  const date = new Date().toISOString().split("T")[0];

  await sql`
    INSERT INTO invoices 
    (customer_id, amount, status, date)
    VALUES
    (${customerId}, ${amountInCents}, ${status}, ${date})
  `;

  /*
  Serverの値を更新したので、キャッシュをクリアしたい
  （古い値を使い続けないように）

  revalidatePathは次回、該当のURLを訪れたときに
  キャッシュをクリアする(現在のURLに対してクリアした
  場合は再レンダリングされる)
  このcacheは以下を含む
  Data cache/full request cache/router cache

  よって、dashboard/invoicesを再度訪れたとき、
  Data cache/full request cache/router cache
  は更新され、新しい値が使われている

  なお、強制的にredirectさせるので古い値を見ることはない
  */
  revalidatePath("/dashboard/invoices");
  redirect("/dashboard/invoices");
}</code></pre>
</details>
<h2 id="q22">Q22 動的ルートについて知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_51">使いどころ</h3>
<pre class="highlight"><code class="language-text">・たとえば、DBから特定の請求書を表示したいとする
・しかし、請求書は多くあり、1つずつにpage.tsxを作るのは
  現実的ではない
⇒データに基づいてルートを作成したい場合に、
  動的ルートが使える</code></pre>
<h3 id="_52">作成方法</h3>
<pre class="highlight"><code class="language-text">・フォルダ名を角括弧で囲む

invoices
 └── [id]
      └── edit
            └── page.tsx

・以下のページについてpage.tsxでまとめて処理が可能
invoices/1/edit/page.tsx
invoices/2/edit/page.tsx

・updateでもdeleteでもidを用いて
  最終的にDBを操作していく

・idについては、DBのprimary key
(UUID or auto increment)であることが多い
一覧のLINKから飛ぶ際に値を渡すことで遷移可能

※現在のページの[id]については
  page.tsx内のexport defaultコンポーネントで
  paramsという引数を受け取ることで、
  params.idという形でアクセス可能
（共通UIから値を送るような真似は要らない）
（page routerの頃はuseRouterを用いていたので改善点）</code></pre>
<pre class="highlight"><code class="language-tsx">import Form from "@/app/ui/invoices/edit-form";
import Breadcrumbs from "@/app/ui/invoices/breadcrumbs";
import { fetchInvoiceById, fetchCustomers } from "@/app/lib/data";

//ここで受け取っている
export default async function Page({
  params
}: {
  params: {
    id: string
  }
}) {
  const id = params.id;
  const [invoice, customers] = await Promise.all([
    fetchInvoiceById(id),
    fetchCustomers(),
  ]);
  return (
    &lt;main&gt;
      &lt;Breadcrumbs
        breadcrumbs={[
          { label: "Invoices", href: "/dashboard/invoices" },
          {
            label: "Edit Invoices",
            href: `/dashboard/invoices/${id}/edit`,
            active: true,
          },
        ]}
      /&gt;
      {/*更新に必要なデータを渡す*/}
      &lt;Form invoice={invoice} customers={customers} /&gt;
    &lt;/main&gt;
  )
}</code></pre>
<h3 id="_53">注意点</h3>
<pre class="highlight"><code class="language-tsx">/*
form actionには関数を渡す必要があるため
updateInvoice(id)とするのではなく、bindを使う

※idを別で送っているのは、formFieldにhiddenでidを
混ぜたりすると、機密データ上、不適切であるため
*/
const updateInvoiceWithId = updateInvoice.bind(null, id)
return (
  &lt;form action={updateInvoiceWithId}&gt;
)</code></pre>
</details>
<h2 id="q23-nextjs">Q23 Next.jsにおけるエラーの処理について知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="trycatch">try/catchについて</h3>
<pre class="highlight"><code class="language-text">・これはいつも通り
・囲うだけ</code></pre>
<pre class="highlight"><code class="language-tsx">try{
  await sql`
    UPDATE invoices
    SET
      customer_id = ${customerId},
      amount = ${amountInCents},
      status = ${status}
    WHERE
      id = ${id}
  `;
}catch(error){
  return {
    message : "Database Error: Failed to Update Invoice.",
  };
}

revalidatePath("/dashboard/invoices");
redirect("/dashboard/invoices");</code></pre>
<h3 id="redirecttrycatch">注意点(redirectとtry/catch)</h3>
<pre class="highlight"><code class="language-text">・サーバコンポーネントにおけるredirect()は、
　内部的にNEXT_REDIRECTエラーをthrowしている

・これにより、関数がスローされたルートの
  レンダリングが終了する。
  そのため、return を用いる必要がない

⇒throwを投げるので、try...catchの外に書く必要がある</code></pre>
<h3 id="errortsx">error.tsx</h3>
<pre class="highlight"><code class="language-text">・一般的にエラーメッセージは潜在的な問題を早期に発見
  できるという点で優れている

・しかし本番環境では突然の障害を避けることも
  必要になってくる

error.tsx
  ・予期しないエラーに対するcatch-allとして機能する
  ・予期しないエラーが検出された場合、
    フォールバックUIを表示できるようにする役割がある
    (自動的にpage.tsxや子セグメントのpage.tsxを
    Error Boundaryでラップする)

  ・error.tsxはネストされたすべてのルートのエラーを
    処理する。ただし同階層のlayout.tsxは処理できない
    ⇒これは意図的であり、共通UIをフォールバックUIに
      置き換えないようにするためである

  ・error.tsxはclient componentである必要がある
  ・errorというエラー本体と、resetという再レンダリング
    を試みるための引数をpropsとして取る

  ・errorは一時的である可能性があるため
    reset()という回復手段は時に有用になる

以下のフォルダ構成を考える
app
 ├── layout.js
 ├── error.js
 └── dashboard
      ├── layout.js
      ├── error.js
      └── page.js

  ・この時、機能するerror.js配下のようになる
    dashboard/page.jsで発生したらdashboard/error.js
    dashboard/layout.jsは/error.js

  ・つまり、エラーは最も近いError boundaryで処理される
  　ルートレイアウトの場合、たとえばapp/layout.js等だが
  　これは、global-error.jsで処理される

  ・global-error.jsの場合、
    ルートレイアウトも置き換えられるので、
    &lt;html&gt;と&lt;body&gt;タグが必要であることに注意

  ・global-error.jsを作ったとしても、ほとんどの場合、
  　より子の段階のerror.jsで検出できるので、
  　トリガされる可能性はあまりない</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<h3 id="_54">本番と開発の違い</h3>
<pre class="highlight"><code class="language-text">・global-error.jsは本番環境でのみ有効になり、
  開発中は代わりにエラーオーバレイが表示される</code></pre>
</div>
<h3 id="error-boundary">Error boundaryについて</h3>
<pre class="highlight"><code class="language-text">・デフォルトの場合、アプリがレンダリング中にエラーを
  投げると、ReactはそのUIを画面から削除する

・error.tsxはそれを防ぐため、React Error Boundaryを
  自動的に作成する。

・ErrorがError Boundaryの中で投げられた場合、
  エラーは閉じ込められ、fallback-componentが
  レンダリングされる

・そのためError boundaryより上のレイアウトは状態を維持
  して、対話型を保つ事ができる</code></pre>
<h3 id="errortsx_1">error.tsxの使用例</h3>
<pre class="highlight"><code class="language-tsx">/*
解説
  server component内でエラーが投げられた場合、
  Next.jsはErrorオブジェクトをpropsとしてerror.tsxに
  転送する

  ※ただし実稼働環境では機密エラー情報は取り除かれる

  実稼働環境においてErrorクライアントに転送される
  Objectには一般的なmessageとdigestプロパティのみ
  が含まれる

  message:
    Errorに関する一般的なメッセージ
  digest:
    サーバ側ログの対応するエラーと照合するための
    errorのhash

  開発中の場合はデバッグを容易にするために、元の
  エラーメッセージがmessageに含まれている

  Error &amp; { digest?: string }
    Error型のすべてのpropertyとmethodに加えて
    digestをoptionalに追加できるといっている
*/
'use client'

export default function Error({
  error,
  reset,
}: {
  error: Error &amp; { digest?: string }
  reset: () =&gt; void
}) {
  return (
    &lt;div&gt;
      &lt;h2&gt;Something went wrong!&lt;/h2&gt;
      &lt;button onClick={() =&gt; reset()}&gt;Try again&lt;/button&gt;
    &lt;/div&gt;
  )
}</code></pre>
<h3 id="notfound">notFound関数</h3>
<pre class="highlight"><code class="language-text">・error.tsxしかない状態では、
  存在しないURLにアクセスしようとした場合でも
  Error Boundaryにひっかかる

・アクセスしようとしているリソースが見つからなかった場合
  404エラーを表示したい。
  そんな時、not-found.tsxにUIを記述する

・notFound()が、ルートセグメント内でスローされると、
  not-found.tsxがfallbackされる

・notFound()はerror.tsxよりも優先されるため、両方の
  ファイルがある場合、前者の影響を受ける
  同階層のlayout.tsxは影響を受けないなどの特徴は一緒
  なお、notFound()を呼び出すことでエラーがthrowされる
  ので、現在のルートセグメントのレンダリングは終了する

・ルートにnot-foundファイルを置いた場合
  (つまり、app/not-found.tsx)
  アプリで処理されないURLにアクセスしたユーザに対する
  UIを処理できる。</code></pre>
<h3 id="notfound_1">notFound関数の使い方</h3>
<pre class="highlight"><code class="language-tsx">import { notFound } from "next/navigation";

if(/*何らかの条件*/){
  notFound();
}

/*
後は、not-found.tsxにUIを記載
*/</code></pre>
</details>
<h2 id="q24-nextjs">Q24 Next.jsにおいてアクセシビリティを意識する場合の処理について知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_55">アクセシビリティ概要</h3>
<pre class="highlight"><code class="language-text">・誰もが使用できるWebアプリを設計・実装する事</code></pre>
<h3 id="nextjs_2">Next.jsによるアクセシビリティ</h3>
<pre class="highlight"><code class="language-text">eslint-plugin-jsx-a11y
  ・altのない画像
  ・aria-*属性やrole属性の使い方が誤っている場合に
    警告を発する
  ・next.jsにデフォルトで含まれている

使い方
  ・package.jsonのscriptsに以下の様に書く
    "lint" : "next lint"
  ・npm run lintをターミナルに打ち込む
  ・deployする前にローカルで実行してアクセシビリティ
    関連の問題を解決する

エラーがない場合
  ✔ No ESLint warnings or errors

エラーがある場合(altをなくしてみた)

  ./app/ui/invoices/table.tsx
  29:23  Warning: 
  Image elements must have an alt prop, 
  either with meaningful text, 
  or an empty string for decorative images.  
  jsx-a11y/alt-text
</code></pre>
<h3 id="form">formにおけるアクセシビリティについて</h3>
<pre class="highlight"><code class="language-text">セマンティックHTML
  ・&lt;div&gt;の代わりに&lt;input&gt;や&lt;option&gt;を使うこと
  ・セマンティクスとは意味や目的を持たせることを意味する
  ・無特徴なdivを使うのではなく、inputを使うことで
    入力要素であるとわかり、フォームの理解が容易になる

ラベル付け
  ・label要素のfor(プログラムからforを設定する場合は
    htmlForを使用する。たとえばreactから使う場合も)
    と各フォームフィールドのidを結びつけることで、
    支援技術(AT)によるサポートが向上するほか、
    ユーザがラベルをクリックした時対応するフィールドに
    フォーカスできるようになる

フォーカスアウトライン
  ・focusしたときに輪郭線を表示することで、
    今、どこのフィールドにいるのか理解できる</code></pre>
<h3 id="_56">フォームの検証</h3>
<pre class="highlight"><code class="language-text">クライアント側で検証する
  ・フォーム内の要素にrequired等の属性を追加するだけ

サーバ側で検証するメリット
  ・データをDBに送信する前に、データが予期された形式
    であることを確かめられる

  ・つまり、悪意あるユーザがクライアント側の検証を
    バイパスするリスクを軽減できる

  ・たとえばrequiredの場合、ネットワークリクエストを
  　改ざんすることで空の形で送れてしまう

useFormState
  ・&lt;form action={hoge}&gt;が呼び出された時に
    stateが更新されるようにする

  ・Server Actionsと併用することで、hydrateが完了する
    前にフォームが送信された場合でも、サーバからの
    レスポンスを表示できるようになる</code></pre>
<h3 id="useformstate">useFormStateの使い方</h3>
<pre class="highlight"><code class="language-tsx">/*
useFormState
  (action, initialState)という引数を取る
  [state, dispatch]という返り値を返す
  dispatchはactionに渡される、新しいactionである
  (stateを使わないならあまり関係ないが)

  formが送信された後はstateはactionの返り値となる
  actionは第1引数として、stateの現在値を受け取る

  つまり、actionの第1引数の型は、関数側で設定する

  今回の返り値は、型が正しい場合は
    redirectしてしまうのでstateはもう関係なく
  正しくない場合、
    {
      errors: customerId: [ 'Please select a customer.' ]
      message: `Missing Fields. Failed to Create Invoice.`
    }
  となる予定

  これは、zod-object.safeParse().error.flatten()が
  {
    formErrors: [],
    fieldErrors: { customerId: [ 'Please select a customer.' ]}
  }
  のような形で値を返すためである

  fieldErrorsは以下のような形であり、
    errorになったプロパティ: error-message

  たとえば、object型を要求しているのにnullであった場合は
    formErrorsに値が入る

  そのためactionの第1引数の型は以下の様にする
  export type State = {
    errors?: {
      customerId?: string[];
      amount?: string[];
      status?: string[];
    };
    message?: string | null;
  }    

zod
  invalid_type_error: 
    型が違う時に出るエラー 
    エラーメッセージをカスタマイズするために使う 
  safeParse
    型が異なっていてもエラーを出さない
    代わりに情報を表示する
    try/catch要らず

aria-describedby
  要素を説明する要素を特定する
  ここでは要素とエラーメッセージコンテナを結びつける
  エラーメッセージコンテナのidと同じ値にする

aria-live="polite"
  ・要素に変更があったときに、変更内容をスクリーンリーダ
  　などのATに伝える
  ・offなら、ユーザに伝達しない
  ・politeなら現在の読み上げの終了やユーザ入力時
  ・assertiveなら即座に伝達を行う

aria-atomic
  ・false: 変更のある部分だけをATに読み上げさせる
  ・true:変更時、activeな領域全体をATに読み上げさせる

*/
"use client";
import { useFormState } from "react-dom";

export default function Form({
  customers
}: {
  customers: CustomerFiled[]
}){
  const initialState = {message: null, errors: []};
  const [state, dispatch] = useFormState(createInvoice, initialState);

  return (
    &lt;form action={dispatch}&gt;
      {/*...*/}
      &lt;select
        id="customer"
        name="customerId"
        className="peer block w-full rounded-md border border-gray-200 py-2 pl-10 text-sm outline-2 placeholder:text-gray-500"
        defaultValue=""
        aria-describedby="customer-error"
      &gt;
      {/**/}
      &lt;/select&gt;
      {/**/}
      &lt;div 
        id="customer-error"
        aria-live="polite"
        aria-atomic="true"
      &gt;
        {/*ここで更新したstateを用いてerrorメッセージ表示*/}
        {state.errors?.customerId &amp;&amp;
          state.erros.customerId.map((error: string)=&gt;{
            &lt;p className="mt-2 text-sm text-red-500" key={error}&gt;
              {error}
            &lt;/p&gt;
          })
        }
      &lt;/div&gt;
    &lt;/form&gt;
  );

}

//------------------------

export type State = {
  errors?: {
    customerId?: string[];
    amount?: string[];
    status?: string[];
  };
  message?: string | null;
}

const FormSchema = z.object({
  id: z.string(),
  customerId: z.string({
    invalid_type_error: "Please select a customer.",
  }),
  amount: z.coerce
    .number()
    .gt(0, { message: "Please enter an amount greater than $0." }),
  status: z.enum(["pending", "paid"], {
    invalid_type_error: "Please select an invoice status.",
  }),
  date: z.string(),
})

export async function createInvoice(
  prevState: State, //フックから渡された現在のstate
  formData: FormData
){
  const validatedFields = CreateInvoice.safeParse({
      customerId: formData.get("customerId"),
      amount: formData.get("amount"),
      status: formData.get("status"),
    });

    if (!validatedFields.success) {
      /*
      正常に取得できなかった場合はactionの返り値を用い
      stateを更新する
      */
      return {
        errors: validatedFields.error.flatten().fieldErrors,
        message: `Missing Fields. Failed to Create Invoice.`,
      }
    }

    const { customerId, amount, status } = validatedFields.data;
}</code></pre>
</details>
<h2 id="q25-nextjs">Q25 Next.jsにおいて認証を追加する方法を知っていますか?</h2>
<details class="success">
<summary>Success</summary>
<h3 id="_57">認証と認可</h3>
<pre class="highlight"><code class="language-text">認証
  ・ウーザが本人であることを確認する事
  ・ユーザ名やパスワードなどを使う

認可
  ・アプリのどの部分（どの機能）を使用できるか決定する</code></pre>
<h3 id="nextauthjs">NextAuth.jsについて</h3>
<pre class="highlight"><code class="language-text">・アプリに認証を追加する
・session/signIn/signOut/等の複雑な認証機能を抽象化する
・v5から、Auth.jsに名前が変わった

install方法
  npm install next-auth@beta

Cookieの暗号化に伴う秘密キーの生成
  ・「ユーザセッションのセキュリティ」を確保する為に使う
  ・以下のコマンドで生成する
    openssl rand -base64 32

  ・生成されたキーは環境変数として使うので、
    .envファイルでAUTH_SECRET変数の値として使用する</code></pre>
<h3 id="nextauth">NextAuthの使い方</h3>
<pre class="highlight"><code class="language-text">1 installする
2 Cookieの暗号化に使う秘密キーの生成
3 プロジェクトのルートにauth.config.tsを生成し、
  authConfigオブジェクトをexportする
  ※プロジェクトのルートとは/appの下ではなく、
    本当にプロジェクト直下を意味する

4 ルートを保護するロジックを追加し、
  ログインしない限り、アクセスできないページを作る

5 middleware.ts(ミドルウェアファイル)からauthConfig
  オブジェクトをimportする(これもプロジェクト直下に作成)

6 middleware.tsにルートへのリクエスト完了前の
  挙動を記載

7 hash化しておいたpasswordと入力パスワードを比較させる
  ようにする。(bcryptでhash化してからDBにpassを保存し
  ているのでそれを利用する)
  ※bcryptはNext.jsのmiddleware.tsでは利用できないので
    別ファイル(auth.ts)をプロジェクト直下に作成する

8 一致すればuserを返し、しない場合はnullを返す。null
  が返った場合、ユーザはログインできず、再度ログイン画面
  にリダイレクトする

auth.config.ts
  ・NextAuth.jsの設定オプションが含まれる
  ・pagesオプションを使用すると、signIn, signOut,
  　Errorページのルートを指定可能
  ・NextAuth.jsのデフォルトページではなく、
    カスタムされたログインページにリダイレクトさせたい
    場合は設定が必要(pagesオプション)

middleware.ts
  ・リクエストが完了する前にコードを実行可能
  ・middlewareが認証を検証してから、ルートのレンダリング
    が開始されるので、アプリのセキュリティと
    パフォーマンスが向上する
  ・matcherを指定することで、ミドルウェアを適用する
    パスを選択可能
  ・authをexportすることで、ユーザのセッション状態や
    認証情報をルートセグメントから確認可能になる！！！</code></pre>
<h3 id="authconfigts">auth.config.ts詳細</h3>
<pre class="highlight"><code class="language-ts">
/*
dashboard/**にアクセスする場合、
  loginしている =&gt; true
  loginしていない =&gt; false

loginしているがdashboard/*にいない
  dashboard/*にredirect

callbacks
  認証関連のactionが実行された時の挙動を制御する

authorized
  ・ユーザが認可を必要とするときにMiddleWareを介して
    呼び出される
  ・パラメータとして、auth, requestを持つ
  ・!!auth?.userの様に二重否定しているのは、
    ユーザが存在するか否かという情報をBoolean型に変換し
    ログインしているか否かという情報にしたいため
  ・request.nextUrlはアクセスを試みているURLを意味する
  ・return true
    リクエストしたページにアクセスOK
  ・return false
    リクエストしたページにアクセスNG
    ログインページにリダイレクト

providers
  ・様々なログインオプションをリストする配列

new URL(url, base)
  urlが相対URLの場合、baseにはベースとなるURLを記載する
  なお、baseに
  https://www.example.com/hogeという形で指定した
  としてもbase部分はhttps://www.example.comまでになる
  つまり、スキーマ部分を除く、最初のスラッシュまでとなる
  そのためResponse.redirect(...)はdashboard以外の
  ディレクトリが存在しても可能である

satisfies NextAuthConfig
  式が型にマッチするかどうかチェックしている
  以下の場合、authConfigオブジェクトがNextAuthConfig型
  に準拠しているか確認している

*/
import type { NextAuthConfig } from "next-auth";

export const authConfig = {
  pages: {
    signIn: "/login",
  },
  callbacks: {
    authorized({ auth, request: { nextUrl } }) {
      const isLoggedIn = !!auth?.user;
      const isOnDashboard = nextUrl.pathname.startsWith("/dashboard");
      if (isOnDashboard) {
        if (isLoggedIn) return true;
        return false;
      }
      else if (isLoggedIn) {
        return Response.redirect(new URL("/dashboard", nextUrl));
      }
      return true;
    },
  },
  providers: [],
} satisfies NextAuthConfig;</code></pre>
<h3 id="middlewarets">middleware.ts詳細</h3>
<pre class="highlight"><code class="language-tsx">import NextAuth from "next-auth";
import { authConfig } from "@/auth.config";

/*
authConfigで定義した、NextAuthの設定情報を
NextAuth()の引数として渡す

.authをexportすることで、アプリ内で認証機能を使える
ようになる

/((?!api|_next/static|_next/image|.*\\.png$).*)
  ?!なので否定先読み
  apiが含まれるパス
  _next/staticが含まれるパス
  _next/imageが含まれるパス
  *.pngで終わるパス
  以上を含まずスラッシュから始まるすべてのパスが
  middleware.tsの影響下
*/

export default NextAuth(authConfig).auth;

export const config = {
  matcher: ['/((?!api|_next/static|_next/image|.*\\.png$).*)'],
}</code></pre>
<h3 id="authts">auth.ts詳細</h3>
<pre class="highlight"><code class="language-tsx">import NextAuth from 'next-auth';
import Credentials from 'next-auth/providers/credentials';
import { authConfig } from './auth.config';
import { z } from 'zod';
import { sql } from '@vercel/postgres';
import type { User } from '@/app/lib/definitions';
import bcrypt from 'bcrypt';

//戻り値の型はUser or undefined
//なお、非同期で実行される
async function getUser(
  email: string
): Promise&lt;User | undefined&gt; {
  try{
    //戻り値の型はUser
    const user = await sql&lt;User&gt;`
      SELECT *
      FROM users
      WHERE email=${email}
    `
    return user.rows[0];
  }catch(error){
    console.error("Failed to fetch user:", error);
    throw new Error("Failed to fetch user.");
  }
}

/*
bcrypt.compare(hash前, hash後)

credentials
  Credentialsを使用している場合、
  NextAuth.jsはユーザからの入力データを自動的に処理し
  authorizeに渡すので、credentialsを明示的に定義する
  必要はない

authorize関数の返り値
  null: リクエストは拒否。再度ログイン画面を表示
  null以外：
    ・該当オブジェクトをJWTに保存
    ・ユーザはサインインする
    ・保存したオブジェクトは、サインイン後のsession管理
      や、ユーザ情報の取得に使用される
      従って、ユーザID,名前,mail-address等を保存する

NextAuthの返り値
  ・auth, signIn, signOut
  ・これは本来クライアント側に書く(クライアント側の
  動作・例えばボタンを押すなどで呼び出したいため)が、
  use serverを用いれば、サーバ上の該当関数にクライアント
  側からアクセスできるようになるため、特に制限はない

*/

export const {auth, signIn, signOut } = NextAuth({
  ...authConfig,
  providers: [
    Credentials({
      async authorize(credentials){
        const parsedCredentials = z
          .object({
            email: z.string().email(),
            password: z.string()
          })
          .safeParse(credentials);

        if(parsedCredentials.success){
          const {email, password} = parsedCredentials.data;
          const user = await getUser(email);
          if (!user) return null;
          const passwordsMatch = await bcrypt.compare(password, user.password);

          if(passwordMatch) return user;
        }
        console.log('Invalid credentials');
        return null;
      }
    })
  ]
})</code></pre>
<h3 id="_58">ログインフォームと認証ロジックの接続</h3>
<pre class="highlight"><code class="language-tsx">"use server";
import { signIn } from "@/auth"
import { AuthError } from "next-auth";

//...

export async function authenticate(
  prevState: string | undefined,
  formDate : FormData,
){
  /*
  signIn(認証プロバイダ, 入力データ)
  たとえば、認証プロバイダとしてgoogleを使うなら
  signIn("google", formData)となる
  */
  try{
    await signIn("credentials", formData);
  }catch(error){
    if(error instanceof AuthError){
      switch (error.type){
        //mail or passが間違っている場合
        case "CredentialsSignin":
          return "Invalid credentials.";
        default:
          return "Something went wrong.";
      }
    }
    //AuthErrorでない場合は、更にthrow
    throw error;
  }
}

//----------------------
// login-form.tsx
"use client";

//...
import {useFormState, useFormStatus} from "react-dom";
import {authenticate} from "@/app/lib/actions";

/*
以前と同じように、エラーであれば返り値でstateを更新し、
エラーメッセージ(文字列)を表示する

useFormStatus
  ・直近のフォーム送信に関するデータを読み取る
  ・返り値の1つであるpendingは、送信が進行中ならtrue

aria-disabled
  ・trueなら編集やその他の操作が無効になる
  ・disabledとの違いは、
    tabによるfocusが可能であるという点
*/
export default function LoginForm(){
  const [errorMessage, dispatch] = useFormState(authenticate, undefined);

  return (
    &lt;form action={dispatch} className="space-y-3"&gt;
    {/**/}
    &lt;LoginButton /&gt;
    &lt;div
      className="flex h-8 items-end space-x-1"
      aria-live="polite"
      aria-atomic="true"
    &gt;
      {errorMessage &amp;&amp; (
        &lt;&gt;
          &lt;ExclamationCircleIcon className="h-5 w-5 text-red-500" /&gt;
          &lt;p className="text-sm text-red-500"&gt;{errorMessage}&lt;/p&gt;
        &lt;/&gt;
      )}
    &lt;/div&gt;
    &lt;/form&gt;
  )
}

/*
aria-disabledにしただけでは、値を送信中に送れてしまう
ため、条件付きレンダリングを行う
*/
function LoginButton() {
  const { pending } = useFormStatus();

  return (
    &lt;Button
      type={pending ? "button" : "submit"}
      className="mt-4 w-full"
      aria-disabled={pending}
    &gt;
      Log in &lt;ArrowRightIcon className="ml-auto h-5 w-5 text-gray-50" /&gt;
    &lt;/Button&gt;
  );
}

// ---------
// logout機能の実装
// login, logoutには時間がかかるので当然await

import { signOut } from '@/auth';
export default function SideNav() {
  return (
    // ...
    &lt;form
    action={async () =&gt; {
      "use server";
      await signOut();
    }}
    &gt;
  )
}</code></pre>
<h3 id="_59">補足(認証の種類)</h3>
<pre class="highlight"><code class="language-text">・今回はEmail &amp; passwordを用いて認証した
・これは今はあまり主流ではない（というか安全ではない）

Credentials Authentication
  ・パスワードをDBに抱えるリスクと総当たり攻撃による
    危険性があるため推奨はされない
  ・Auth.jsも(乗り換えさせるために)拡張性を
  　敢えて下げているとのこと

OAuth Authentication
  ・Google等を用いて代わりに認可・認証してもらう
  ・JWTを使うことでDBを持たずに安全な運用が可能
  ・パスワードを持つ必要もない
  ・Google側にBANされた場合、どうなるのだろうか
  ・安全性のためには複数のOAuthプロバイダと連携すべき?

Email Authentication
  ・メールアドレスを用いて認可を行う
  ・DBはやはり必要
  ・SignInのために、SMSまたはアドレス宛てにリンクを送信
    ユーザはそのリンクを踏むとサインインできる。
    このリンクをMagic Linkと呼ぶ
  ・メールサーバもセキュリティのレベルが問われる

今後主流となっていくであろう認証
  ・OAuth認証は、パスワードを共有する数を減らし、
    またパスワードを第三者サービスに共有することなく
    利用できるという点で便利

  ・ただし、OAuthプロバイダのアカウントが侵害されると
  　SSOであるためすべてのサービスに影響が出る
  　という欠点がある

  ・Password Managerについても、マスターパスワードを
    奪われたら同じことなのかもしれない</code></pre>
</details>
<h2 id="q26-nextjs">Q26 Next.jsにメタデータを追加する方法を知っていますか?</h2>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  ページトップへ戻る
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 Toraneko0101
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.tabs.link", "navigation.top"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../javascripts/tablesort.js"></script>
      
        <script src="../javascripts/custom.js"></script>
      
        <script src="../javascripts/prism.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>